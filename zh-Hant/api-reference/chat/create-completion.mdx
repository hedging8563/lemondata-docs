---
title: "建立對話補全 (Create Chat Completion)"
openapi: "POST /v1/chat/completions"
description: "為對話訊息建立補全"
---

## 授權

<ParamField header="Authorization" type="string" required>
  API 認證的 Bearer 令牌。格式：`Bearer sk-your-api-key`
</ParamField>

## 請求主體 (Request Body)

<ParamField body="model" type="string" required>
  要使用的模型 ID。請參閱 [Models](https://lemondata.cc/zh-TW/models) 以查看可用選項。
</ParamField>

<ParamField body="messages" type="array" required>
  組成對話的訊息列表。

  每個訊息物件包含：
  - `role` (string)：`system`、`user` 或 `assistant`
  - `content` (string | array)：訊息內容
</ParamField>

<ParamField body="temperature" type="number" default="1">
  介於 0 到 2 之間的取樣溫度。較高的數值會使輸出更具隨機性。
</ParamField>

<ParamField body="max_tokens" type="integer">
  要生成的最大 token 數量。
</ParamField>

<ParamField body="stream" type="boolean" default="false">
  若為 true，部分訊息增量將以 SSE 事件形式發送。
</ParamField>

<ParamField body="stream_options" type="object">
  串流選項。設置 `include_usage: true` 以在串流區塊中接收 token 使用情況。
</ParamField>

<ParamField body="top_p" type="number" default="1">
  核取樣 (Nucleus sampling) 參數。我們建議調整此參數或 temperature，而非兩者同時調整。
</ParamField>

<ParamField body="frequency_penalty" type="number" default="0">
  介於 -2.0 到 2.0 之間的數值。正值會懲罰重複的 token。
</ParamField>

<ParamField body="presence_penalty" type="number" default="0">
  介於 -2.0 到 2.0 之間的數值。正值會懲罰已在文本中出現過的 token。
</ParamField>

<ParamField body="stop" type="string | array">
  最多 4 個序列，API 將在這些序列處停止生成 token。
</ParamField>

<ParamField body="tools" type="array">
  模型可能呼叫的工具列表 (function calling)。
</ParamField>

<ParamField body="tool_choice" type="string | object">
  控制模型如何使用工具。選項：`auto`、`none`、`required` 或特定的工具物件。
</ParamField>

<ParamField body="parallel_tool_calls" type="boolean" default="true">
  是否啟用並行函式呼叫。設置為 false 則按順序呼叫函式。
</ParamField>

<ParamField body="max_completion_tokens" type="integer">
  補全的最大 token 數量。`max_tokens` 的替代方案，建議用於 o1/o3 等較新的模型。
</ParamField>

<ParamField body="reasoning_effort" type="string">
  o1/o3 模型的推理強度。選項：`low`、`medium`、`high`。
</ParamField>

<ParamField body="seed" type="integer">
  用於確定性取樣的隨機種子。
</ParamField>

<ParamField body="n" type="integer" default="1">
  要生成的補全數量 (1-128)。
</ParamField>

<ParamField body="logprobs" type="boolean">
  是否返回對數機率 (log probabilities)。
</ParamField>

<ParamField body="top_logprobs" type="integer">
  要返回的前幾個對數機率數量 (0-20)。需要設置 `logprobs: true`。
</ParamField>

<ParamField body="top_k" type="integer">
  Top-K 取樣參數（適用於 Anthropic/Gemini 模型）。
</ParamField>

<ParamField body="response_format" type="object">
  回應格式規範。使用 `{"type": "json_object"}` 開啟 JSON 模式，或使用 `{"type": "json_schema", "json_schema": {...}}` 進行結構化輸出。
</ParamField>

<ParamField body="logit_bias" type="object">
  修改指定 token 出現的可能性。將 token ID（字串形式）映射到 -100 到 100 之間的偏差值。
</ParamField>

<ParamField body="user" type="string">
  代表您終端用戶的唯一識別碼，用於濫用監控。
</ParamField>

<ParamField body="cache_control" type="object">
  LemonData 快取控制選項。

  - `type` (string)：快取策略 - `default`、`no_cache`、`no_store`、`response_only`、`semantic_only`
  - `max_age` (integer)：快取存活時間 (TTL)，以秒為單位（最大 86400）
</ParamField>

## 回應 (Response)

<ResponseField name="id" type="string">
  補全的唯一識別碼。
</ResponseField>

<ResponseField name="object" type="string">
  始終為 `chat.completion`。
</ResponseField>

<ResponseField name="created" type="integer">
  補全建立時的 Unix 時間戳記。
</ResponseField>

<ResponseField name="model" type="string">
  用於補全的模型。
</ResponseField>

<ResponseField name="choices" type="array">
  補全選項列表。

  每個選項包含：
  - `index` (integer)：選項索引
  - `message` (object)：生成的訊息
  - `finish_reason` (string)：模型停止的原因 (`stop`、`length`、`tool_calls`)
</ResponseField>

<ResponseField name="usage" type="object">
  Token 使用統計。

  - `prompt_tokens` (integer)：提示詞中的 token 數量
  - `completion_tokens` (integer)：補全中的 token 數量
  - `total_tokens` (integer)：使用的總 token 數量
</ResponseField>

<RequestExample>
```bash cURL
curl -X POST "https://api.lemondata.cc/v1/chat/completions" \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o",
    "messages": [
      {"role": "system", "content": "You are a helpful assistant."},
      {"role": "user", "content": "Hello!"}
    ],
    "temperature": 0.7,
    "max_tokens": 1000
  }'
```

```python Python
from openai import OpenAI

client = OpenAI(
    api_key="sk-your-api-key",
    base_url="https://api.lemondata.cc/v1"
)

response = client.chat.completions.create(
    model="gpt-4o",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Hello!"}
    ],
    temperature=0.7,
    max_tokens=1000
)

print(response.choices[0].message.content)
```

```javascript JavaScript
import OpenAI from 'openai';

const client = new OpenAI({
  apiKey: 'sk-your-api-key',
  baseURL: 'https://api.lemondata.cc/v1'
});

const response = await client.chat.completions.create({
  model: 'gpt-4o',
  messages: [
    { role: 'system', content: 'You are a helpful assistant.' },
    { role: 'user', content: 'Hello!' }
  ],
  temperature: 0.7,
  max_tokens: 1000
});

console.log(response.choices[0].message.content);
```

```go Go
package main

import (
    "context"
    "fmt"
    "github.com/sashabaranov/go-openai"
)

func main() {
    config := openai.DefaultConfig("sk-your-api-key")
    config.BaseURL = "https://api.lemondata.cc/v1"
    client := openai.NewClientWithConfig(config)

    resp, err := client.CreateChatCompletion(
        context.Background(),
        openai.ChatCompletionRequest{
            Model: "gpt-4o",
            Messages: []openai.ChatCompletionMessage{
                {Role: openai.ChatMessageRoleSystem, Content: "You are a helpful assistant."},
                {Role: openai.ChatMessageRoleUser, Content: "Hello!"},
            },
            Temperature: 0.7,
            MaxTokens:   1000,
        },
    )
    if err != nil {
        panic(err)
    }
    fmt.Println(resp.Choices[0].Message.Content)
}
```

```php PHP
<?php
$ch = curl_init('https://api.lemondata.cc/v1/chat/completions');

curl_setopt_array($ch, [
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POST => true,
    CURLOPT_HTTPHEADER => [
        'Content-Type: application/json',
        'Authorization: Bearer sk-your-api-key'
    ],
    CURLOPT_POSTFIELDS => json_encode([
        'model' => 'gpt-4o',
        'messages' => [
            ['role' => 'system', 'content' => 'You are a helpful assistant.'],
            ['role' => 'user', 'content' => 'Hello!']
        ],
        'temperature' => 0.7,
        'max_tokens' => 1000
    ])
]);

$response = curl_exec($ch);
curl_close($ch);

$data = json_decode($response, true);
echo $data['choices'][0]['message']['content'];
```
</RequestExample>

<ResponseExample>
```json Response
{
  "id": "chatcmpl-abc123",
  "object": "chat.completion",
  "created": 1706000000,
  "model": "gpt-4o",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Hello! How can I help you today?"
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 20,
    "completion_tokens": 9,
    "total_tokens": 29
  }
}
```
</ResponseExample>
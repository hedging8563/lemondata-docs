---
title: "DingTalk"
description: "使用串流模式 (Stream mode) 將您的 Claw 實例連接至 DingTalk"
---

使用串流模式 (Stream mode) 將釘釘 (DingTalk) 連接至您的 Claw 實例 —— 這是一種基於 WebSocket 的連接方式，不需要公開的 URL。

## 先決條件

- 具備企業管理員權限的 [DingTalk](https://www.dingtalk.com/) 帳號
- 一個 Claw 實例 ([在此建立](https://lemondata.cc/dashboard/claw))

## 設定指南

<Steps>
  <Step title="建立 DingTalk 應用程式">
    1. 前往 [DingTalk 開放平台](https://open-dev.dingtalk.com/)
    2. 點擊 **應用開發** → **企業內部開發**
    3. 點擊 **建立應用**
    4. 輸入應用程式名稱與描述
    5. 點擊 **確定**
  </Step>
  <Step title="啟用機器人功能">
    1. 在您的應用程式中，前往 **應用能力** → **機器人**
    2. 啟用機器人配置
    3. 選擇 **串流模式 (Stream Mode)** (推薦 —— 不需要公開 URL)
    4. 點擊 **發佈**

    <Tip>
    串流模式使用 WebSocket，因此您的 Claw 實例不需要公開存取的 Webhook URL。這是最簡單的設定方式。
    </Tip>
  </Step>
  <Step title="獲取憑證">
    1. 前往 **基礎資訊** → **憑證與基礎資訊**
    2. 複製 **AppKey** 與 **AppSecret**
  </Step>
  <Step title="發佈應用程式">
    1. 前往 **版本管理與發佈**
    2. 建立新版本 (至少為測試版本)
    3. 設定可見範圍 (哪些使用者/部門可以看到機器人)
    4. 提交並發佈
  </Step>
  <Step title="在 LemonData 控制面板中配置">
    1. 前往您的 [Claw 控制面板](https://lemondata.cc/dashboard/claw)
    2. 點擊實例上的 **設定圖示**
    3. 開啟 **IM Integrations** 標籤頁
    4. 展開 **DingTalk** 區塊
    5. 貼上您的 **AppKey** 與 **AppSecret**
    6. 點擊 **儲存**
  </Step>
  <Step title="開始對話">
    1. 在 DingTalk 中，搜尋您的機器人名稱
    2. 傳送訊息給它
    3. 第一位使用者將 **自動配對** 為擁有者 —— 無需任何程式碼！
    4. 開始與 AI 對話！
  </Step>
</Steps>

## 群組設定

在控制面板的 **IM Integrations** 標籤頁中配置群聊行為：

| 設定 | 選項 | 描述 |
|---------|---------|-------------|
| **Group Policy** | 開放 (預設) / 白名單 / 已停用 | 控制誰可以在群組中觸發機器人 |
| **Group Allowed Users** | 使用者 ID 列表 | 僅限這些使用者可以觸發機器人 (白名單模式) |

<Note>
DingTalk **一律需要 @提及** 才能在群組中觸發機器人 —— 這是平台限制，無法更改配置。DingTalk 不支援群組 ID 過濾；請使用 Group Policy 設定來控制存取權限。
</Note>

## 疑難排解

<AccordionGroup>
  <Accordion title="機器人沒有回應">
    - 驗證 AppKey 和 AppSecret 是否正確
    - 檢查應用程式是否已發佈 (至少為測試版本)
    - 確保在機器人配置中選擇了串流模式 (Stream mode)
    - 驗證機器人對您的使用者帳號是否可見
  </Accordion>
  <Accordion title="連線頻繁中斷">
    - 串流模式維持持久的 WebSocket 連線
    - 短暫斷開連線是正常的 —— 機器人會自動重新連線
    - 如果問題持續存在，請嘗試從控制面板重新啟動實例
  </Accordion>
</AccordionGroup>
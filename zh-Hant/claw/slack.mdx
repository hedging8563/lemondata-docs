---
title: "Slack"
description: "使用 Socket Mode 將您的 Claw 實例連接到 Slack 工作區"
---

使用 Socket Mode 將 AI 助手新增到您的 Slack 工作區 — 無需公開 URL。

## 先決條件

- 一個您擁有管理員權限的 [Slack](https://slack.com/) 工作區
- 一個 Claw 實例（[在此建立](https://lemondata.cc/dashboard/claw)）

## 設定指南

<Steps>
  <Step title="建立 Slack 應用程式">
    1. 前往 [Slack API](https://api.slack.com/apps) 並點擊 **Create New App**
    2. 選擇 **From scratch**
    3. 輸入應用程式名稱（例如「AI Assistant」）並選擇您的工作區
    4. 點擊 **Create App**
  </Step>
  <Step title="啟用 Socket Mode">
    1. 在左側側邊欄中，前往 **Socket Mode**
    2. 將 **Enable Socket Mode** 切換為 ON
    3. 為 token 命名（例如「claw-socket」）並點擊 **Generate**
    4. 複製 **App-Level Token**（以 `xapp-` 開頭）— 您將需要此資訊
  </Step>
  <Step title="配置 Bot 權限">
    1. 前往側邊欄中的 **OAuth & Permissions**
    2. 在 **Bot Token Scopes** 下，新增以下權限範圍（scopes）：
       - `chat:write` — 傳送訊息
       - `im:history` — 讀取私訊（DM）紀錄
       - `im:read` — 查看私訊（DM）
       - `im:write` — 發起私訊（DM）
       - `app_mentions:read` — 偵測 @提及（mentions）
    3. 點擊頂部的 **Install to Workspace**
    4. 授權應用程式
    5. 複製 **Bot User OAuth Token**（以 `xoxb-` 開頭）
  </Step>
  <Step title="啟用事件">
    1. 前往側邊欄中的 **Event Subscriptions**
    2. 將 **Enable Events** 切換為 ON
    3. 在 **Subscribe to bot events** 下，新增：
       - `message.im` — 私訊（DM）中的訊息
       - `app_mention` — 頻道中的 @提及
    4. 點擊 **Save Changes**
  </Step>
  <Step title="在 LemonData 控制面板中配置">
    1. 前往您的 [Claw Dashboard](https://lemondata.cc/dashboard/claw)
    2. 點擊實例上的**設定圖示**
    3. 開啟 **IM Integrations** 分頁
    4. 展開 **Slack** 區塊
    5. 貼上您的 **App Token** (`xapp-...`) 和 **Bot Token** (`xoxb-...`)
    6. 點擊 **Save**
  </Step>
  <Step title="開始對話">
    1. 在 Slack 中，向您的機器人傳送私訊或在頻道中 @提及它
    2. 完成配對程序
    3. 開始與 AI 對話！
  </Step>
</Steps>

## 存取控制

### 群組設定

在控制面板的 **IM Integrations** 分頁中配置頻道存取：

| 設定 | 選項 | 描述 |
|---------|---------|-------------|
| **Group Policy** | Open（預設）/ Allowlist / Disabled | 控制機器人在哪些頻道中回應 |
| **Require @mention** | On / Off | 機器人僅在被 @提及時回應 |
| **Group IDs** | 頻道 ID 列表 | 限制為特定頻道（留空 = 所有頻道） |
| **Group Allowed Users** | 使用者 ID 列表 | 僅這些使用者可以觸發機器人（allowlist 模式） |

<Tip>
預設情況下，Slack 使用 **open** 群組策略 — 機器人會在所有被邀請到的頻道中回應。使用 **allowlist** 可限制為特定頻道。
</Tip>

## 疑難排解

<AccordionGroup>
  <Accordion title="機器人沒有回應私訊（DM）">
    - 驗證兩個 token 是否正確（App Token 以 `xapp-` 開頭，Bot Token 以 `xoxb-` 開頭）
    - 檢查是否已訂閱 `message.im` 事件
    - 確保應用程式已安裝到您的工作區
  </Accordion>
  <Accordion title="機器人沒有回應 @提及">
    - 檢查是否已配置 `app_mentions:read` 權限範圍和 `app_mention` 事件
    - 必須先將機器人邀請至頻道（輸入 `/invite @botname`）
  </Accordion>
  <Accordion title="「not_allowed_token_type」錯誤">
    - 確保在 App Token 欄位中使用的是 **App-Level Token** (`xapp-`)，而非 Bot Token
    - Bot Token (`xoxb-`) 應填入 Bot Token 欄位
  </Accordion>
</AccordionGroup>
---
title: "OpenCode"
description: "配置 OpenCode 以使用 LemonData API"
---

## 概覽

OpenCode 是一款在終端機中運行的開源 AI 編碼助手。它支援多個 LLM 提供商，並可配置為使用 LemonData 的 API 以存取 300 多個模型。

## 安裝

<Tabs>
  <Tab title="安裝腳本">
    ```bash
    curl -fsSL https://opencode.ai/install | bash
    ```
  </Tab>
  <Tab title="Homebrew">
    ```bash
    brew install opencode-ai/tap/opencode
    ```

    或使用社群 tap（更新更頻繁）：
    ```bash
    brew install anomalyco/tap/opencode
    ```
  </Tab>
  <Tab title="Go">
    ```bash
    go install github.com/opencode-ai/opencode@latest
    ```
  </Tab>
</Tabs>

驗證安裝：

```bash
opencode --version
```

## 配置

### 步驟 1：設置環境變數

```bash
export OPENAI_API_KEY="sk-your-lemondata-key"
export LOCAL_ENDPOINT="https://api.lemondata.cc/v1"
```

如需永久配置，請將其添加到 `~/.bashrc` 或 `~/.zshrc`：

```bash
echo 'export OPENAI_API_KEY="sk-your-lemondata-key"' >> ~/.zshrc
echo 'export LOCAL_ENDPOINT="https://api.lemondata.cc/v1"' >> ~/.zshrc
source ~/.zshrc
```

### 步驟 2：配置 OpenCode

在您的專案根目錄中建立或編輯 `~/.config/opencode/opencode.json`（全域）或 `opencode.json`：

```json
{
  "provider": {
    "openai": {
      "options": {
        "apiKey": "sk-your-lemondata-key",
        "baseURL": "https://api.lemondata.cc/v1"
      }
    }
  },
  "model": "gpt-4o",
  "agent": {
    "coder": {
      "model": "gpt-4o"
    }
  }
}
```

## 基本用法

**啟動互動模式：**

```bash
opencode
```

**使用提示詞運行：**

```bash
opencode "Explain this codebase"
```

**指定模型：**

```bash
opencode --model gpt-4o "Fix the bugs in main.py"
```

## 可用模型

| 模型 | 最適用於 |
|-------|----------|
| `gpt-4o` | 複雜任務、程式碼架構 |
| `gpt-4o-mini` | 快速修復、簡單查詢 |
| `claude-sonnet-4-5` | 程式碼審查、文件編寫 |
| `claude-opus-4-5` | 複雜推理 |
| `gemini-2.5-flash` | 快速響應 |
| `deepseek-r1` | 演算法設計 |

## 常見指令

**分析程式碼：**

```bash
opencode "What does this function do?" < src/utils.ts
```

**生成程式碼：**

```bash
opencode "Create a REST API with Express"
```

**審查變更：**

```bash
git diff | opencode "Review these changes"
```

**修復錯誤：**

```bash
opencode "Fix the TypeScript errors in this project"
```

## 互動指令

| 指令 | 描述 |
|---------|-------------|
| `/help` | 顯示可用指令 |
| `/model <name>` | 切換到不同的模型 |
| `/clear` | 清除對話歷史 |
| `/exit` | 退出 OpenCode |

## 疑難排解

<AccordionGroup>
  <Accordion title="連線錯誤">
    - 驗證 `LOCAL_ENDPOINT` 已設置為 `https://api.lemondata.cc/v1`
    - 檢查網路連線
    - 嘗試使用 `curl https://api.lemondata.cc/v1/models` 進行測試
  </Accordion>

  <Accordion title="身分驗證失敗">
    - 驗證 `OPENAI_API_KEY` 環境變數已設置
    - 檢查金鑰是否以 `sk-` 開頭
    - 確保金鑰在 LemonData 控制面板中處於啟用狀態
  </Accordion>

  <Accordion title="找不到模型">
    - 檢查配置中的模型名稱是否完全匹配
    - 在 [lemondata.cc/en/models](https://lemondata.cc/zh-TW/models) 驗證模型可用性
  </Accordion>
</AccordionGroup>

## 最佳實踐

<AccordionGroup>
  <Accordion title="使用專案上下文">
    從您的專案根目錄運行 OpenCode，以便更好地理解您的程式碼庫。
  </Accordion>

  <Accordion title="選擇合適的模型">
    對於簡單任務使用更快的模型 (gpt-4o-mini)，對於複雜任務使用強大的模型 (gpt-4o, claude)。
  </Accordion>

  <Accordion title="審查生成的程式碼">
    在將變更應用到您的專案之前，請務必審查 AI 生成的程式碼。
  </Accordion>
</AccordionGroup>
<think>**Defining the Scope**
**Refining Translation Rules**
**Applying the Rules**
**Beginning the Translation**
**Analyzing New Sections**
**Analyzing and Adapting**
**Applying Direct Translations**
**Translating the Steps**
**Refining the Approach**
**Reviewing and Finalizing**
**Applying Final Adjustments**
</think>

---
title: "Feishu / Lark"
description: "WebSocket 이벤트를 사용하여 Claw 인스턴스를 Feishu (Lark)에 연결하세요"
---

Feishu (飞书) 또는 Lark를 Claw 인스턴스에 연결하세요. WebSocket 모드를 사용하므로 퍼블릭 콜백 URL이 필요하지 않습니다.

## 사전 요구 사항

- 개발자 권한이 있는 [Feishu](https://www.feishu.cn/) 또는 [Lark](https://www.larksuite.com/) 계정
- Claw 인스턴스 ([여기에서 생성](https://lemondata.cc/dashboard/claw))

## 설정 가이드

<Steps>
  <Step title="Feishu 앱 생성">
    1. [Feishu 오픈 플랫폼](https://open.feishu.cn/app) (또는 [Lark Developer](https://open.larksuite.com/app))으로 이동합니다.
    2. **Create Custom App**을 클릭합니다.
    3. 앱 이름과 설명을 입력합니다.
    4. **Create**를 클릭합니다.
  </Step>
  <Step title="봇 기능 추가">
    1. 앱 설정에서 **Features** → **Bot**으로 이동합니다.
    2. 봇 기능을 활성화합니다.
    3. 이를 통해 앱에서 메시지를 주고받을 수 있습니다.
  </Step>
  <Step title="자격 증명 가져오기">
    1. **Credentials & Basic Info**로 이동합니다.
    2. **App ID**(`cli_`로 시작)를 복사합니다.
    3. **App Secret**을 복사합니다.
  </Step>
  <Step title="이벤트 구독 설정">
    1. **Event Subscriptions**로 이동합니다.
    2. **WebSocket** 모드를 선택합니다 (권장 — 퍼블릭 URL이 필요하지 않음).
    3. 메시지가 표시되면 **Encrypt Key**와 **Verification Token**을 설정합니다.

    <Tip>
    LemonData 대시보드에서 Feishu를 설정하면 Encrypt Key와 Verification Token이 **자동 생성**됩니다. 이 값들을 Feishu 개발자 콘솔에 복사하세요.
    </Tip>
  </Step>
  <Step title="이벤트 권한 추가">
    1. Event Subscriptions 아래에서 다음 이벤트를 추가합니다:
       - `im.message.receive_v1` — 메시지 수신
    2. **Permissions & Scopes**로 이동하여 다음을 추가합니다:
       - `im:message` — 메시지 송수신
       - `im:message.group_at_msg` — 그룹 @멘션 수신
    3. **Save**를 클릭합니다.
  </Step>
  <Step title="앱 배포">
    1. **App Release** → **Version Management**로 이동합니다.
    2. 새 버전을 생성합니다.
    3. 검토를 위해 제출합니다 (내부 앱의 경우 대개 즉시 승인됩니다).
    4. 승인되면 앱이 활성화됩니다.
  </Step>
  <Step title="LemonData 대시보드에서 설정">
    1. [Claw 대시보드](https://lemondata.cc/dashboard/claw)로 이동합니다.
    2. 인스턴스의 **설정 아이콘**을 클릭합니다.
    3. **IM Integrations** 탭을 엽니다.
    4. **Feishu** 섹션을 확장합니다.
    5. **App ID**와 **App Secret**을 붙여넣습니다.
    6. 자동 생성된 **Encrypt Key**와 **Verification Token**을 Feishu 개발자 콘솔에 다시 복사합니다.
    7. **Save**를 클릭합니다.
  </Step>
  <Step title="채팅 시작">
    1. Feishu에서 이름으로 봇을 검색합니다.
    2. 메시지를 보냅니다.
    3. 첫 번째 사용자가 자동으로 소유자로 **페어링**됩니다 — 코드가 필요하지 않습니다!
    4. AI와 채팅을 시작하세요!
  </Step>
</Steps>

## 그룹 설정

대시보드의 **IM Integrations** 탭에서 그룹 채팅 동작을 설정하세요:

| 설정 | 옵션 | 설명 |
|---|---|---|
| **Group Policy** | Open (기본값) / Allowlist / Disabled | 그룹에서 봇을 트리거할 수 있는 사용자를 제어합니다. |
| **Require @mention** | On / Off | @멘션되었을 때만 봇이 응답합니다. |
| **Group IDs** | 채팅 ID 목록 | 특정 그룹으로 제한합니다 (비어 있음 = 모든 그룹). |
| **Group Allowed Users** | Open ID 목록 | 이 사용자들만 봇을 트리거할 수 있습니다 (Allowlist 모드). |

## 문제 해결

<AccordionGroup>
  <Accordion title="봇이 메시지를 수신하지 못함">
    - 앱이 게시되고 승인되었는지 확인합니다.
    - `im.message.receive_v1` 이벤트가 구독되었는지 확인합니다.
    - WebSocket 모드가 선택되었는지 확인합니다 (HTTP 아님).
    - Feishu 콘솔과 Claw 설정 사이의 Encrypt Key 및 Verification Token이 일치하는지 확인합니다.
  </Accordion>
  <Accordion title="'app_ticket' 오류">
    - 이는 대개 App ID 또는 App Secret이 올바르지 않음을 의미합니다.
    - 대시보드에서 자격 증명을 다시 확인하세요.
  </Accordion>
</AccordionGroup>
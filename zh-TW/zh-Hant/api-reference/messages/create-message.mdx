---
title: "建立訊息"
openapi: "POST /v1/messages"
description: "使用 Anthropic Messages API 格式建立訊息"
---

## 總覽

此端點提供原生的 Anthropic Messages API 相容性。適用於具備擴展思考（extended thinking）等功能的 Claude 模型。

<Note>
Anthropic SDK 的 Base URL：`https://api.lemondata.cc`（無 `/v1` 後綴）
</Note>

## 請求標頭

<ParamField header="x-api-key" type="string" required>
  您的 LemonData API 金鑰。Bearer token 的替代方案。
</ParamField>

<ParamField header="anthropic-version" type="string" required>
  Anthropic API 版本。請使用 `2023-06-01`。
</ParamField>

## 請求主體

<ParamField body="model" type="string" required>
  Claude 模型 ID（例如 `claude-sonnet-4-5`）。
</ParamField>

<ParamField body="messages" type="array" required>
  包含 `role` 與 `content` 的訊息物件陣列。
</ParamField>

<ParamField body="max_tokens" type="integer" required>
  生成的最大 token 數量。
</ParamField>

<ParamField body="system" type="string">
  系統提示詞（與 `messages` 陣列分開）。
</ParamField>

<ParamField body="temperature" type="number" default="1">
  取樣溫度（0-1）。
</ParamField>

<ParamField body="stream" type="boolean" default="false">
  啟用串流回應。
</ParamField>

<ParamField body="thinking" type="object">
  擴展思考配置（Claude Opus 4.5）。

  - `type` (string)：設為 `"enabled"` 以啟用
  - `budget_tokens` (integer)：思考的 token 預算
</ParamField>

<ParamField body="tools" type="array">
  模型可用的工具。
</ParamField>

<ParamField body="tool_choice" type="object">
  模型應如何使用工具。選項：`auto`、`any`、`tool`（特定工具）。
</ParamField>

<ParamField body="top_p" type="number">
  核取樣（Nucleus sampling）參數。請使用 `temperature` 或 `top_p` 其中之一，不要同時使用。
</ParamField>

<ParamField body="top_k" type="integer">
  僅從每個 token 的前 K 個選項中進行取樣。
</ParamField>

<ParamField body="stop_sequences" type="array">
  自定義停止序列，將導致模型停止生成。
</ParamField>

<ParamField body="metadata" type="object">
  附加到請求的 metadata。
</ParamField>
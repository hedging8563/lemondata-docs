---
title: "快取管理"
description: "控制 API 請求的快取行為"
---

## 總覽

LemonData 會自動管理快取以優化效能並降低成本。雖然目前沒有公開的端點可用於清除快取項目，但您可以透過請求層級的控制項來完全掌控快取行為。

## 繞過快取

若要獲取不使用快取的最新回應，請在請求中使用 `cache_control` 參數：

<CodeGroup>

```bash cURL
curl -X POST "https://api.lemondata.cc/v1/chat/completions" \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o",
    "messages": [{"role": "user", "content": "Hello!"}],
    "cache_control": {"type": "no_cache"}
  }'
```

```python Python
from openai import OpenAI

client = OpenAI(
    api_key="sk-your-api-key",
    base_url="https://api.lemondata.cc/v1"
)

response = client.chat.completions.create(
    model="gpt-4o",
    messages=[{"role": "user", "content": "Hello!"}],
    extra_body={"cache_control": {"type": "no_cache"}}
)

print(response.choices[0].message.content)
```

```javascript JavaScript
const response = await fetch(
  'https://api.lemondata.cc/v1/chat/completions',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer sk-your-api-key',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      model: 'gpt-4o',
      messages: [{ role: 'user', content: 'Hello!' }],
      cache_control: { type: 'no_cache' }
    })
  }
);

const data = await response.json();
console.log(data);
```

</CodeGroup>

## 快取控制選項

| 類型 | 效果 |
|------|--------|
| `no_cache` | 跳過快取查詢，始終獲取最新回應 |
| `no_store` | 不要將此回應儲存在快取中 |
| `response_only` | 僅使用完全比對快取（跳過語義比對） |
| `semantic_only` | 僅使用語義快取（跳過完全比對） |

## 快取回饋

如果您收到錯誤的快取回應，可以進行回報：

```bash
curl -X POST "https://api.lemondata.cc/v1/cache/feedback" \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "cache_entry_id": "abc123",
    "feedback_type": "wrong_answer",
    "description": "Response was outdated"
  }'
```

當一個快取項目收到足夠的負面回饋時，它將會自動失效。

## 使用情境

<AccordionGroup>
  <Accordion title="測試最新回應">
    在開發過程中，使用 `cache_control: {"type": "no_cache"}` 以確保您獲取的是最新的 API 回應。
  </Accordion>

  <Accordion title="具時效性的查詢">
    對於股票價格或天氣等即時數據，請務必使用 `no_cache` 以獲取最新資訊。
  </Accordion>

  <Accordion title="除錯">
    在對非預期回應進行除錯時，請使用 `no_cache` 以排除快取結果的影響。
  </Accordion>
</AccordionGroup>

<Note>
  有關快取的更多詳細資訊，請參閱 [快取指南](/guides/caching)。
</Note>
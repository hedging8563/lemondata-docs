---
title: "Codex CLI"
description: "Configurer l'interface de ligne de commande (CLI) OpenAI Codex pour utiliser l'API LemonData"
---

## Aperçu

OpenAI Codex est un outil de ligne de commande (CLI) open-source qui agit comme un agent de codage léger, capable de lire, modifier et exécuter du code dans le terminal. Il est basé sur les modèles GPT et optimisé pour la génération de code.

## Configuration requise

- **Système d'exploitation** : macOS, Linux (support officiel), Windows via WSL
- **Node.js** : Version 18+
- **npm** : Version 10.x.x ou supérieure

## Installation

```bash
sudo npm install -g @openai/codex@latest
```

Vérifier l'installation :

```bash
codex --version
```

## Configuration

### Étape 1 : Configurer la clé API

**Temporaire (session actuelle) :**

```bash
export OPENAI_API_KEY="sk-your-lemondata-key"
```

**Configuration permanente :**

Ajouter à `~/.bashrc`, `~/.zshrc`, ou `~/.bash_profile` :

```bash
export OPENAI_API_KEY="sk-your-lemondata-key"
```

Ensuite, recharger :

```bash
source ~/.zshrc  # ou source ~/.bashrc
```

### Étape 2 : Configurer config.toml

Modifier `~/.codex/config.toml` :

```toml
model = "gpt-4o"
model_provider = "lemondata"

[model_providers.lemondata]
name = "LemonData"
base_url = "https://api.lemondata.cc/v1"
env_key = "OPENAI_API_KEY"
wire_api = "chat"
```

<Note>
Si le fichier de configuration n'existe pas, exécutez `codex` une fois pour générer le fichier, puis procédez à l'édition.
</Note>

## Utilisation de base

**Démarrer le mode interactif :**

```bash
codex
```

**Commande directe :**

```bash
codex "Fix the bug in main.py line 42"
```

**Spécifier un modèle :**

```bash
codex -m gpt-4o "Build a REST API server"
```

## Modèles disponibles

| Modèle | Cas d'utilisation |
|-------|----------|
| `gpt-4o` | Tâches de codage complexes, conception d'architecture |
| `gpt-4o-mini` | Corrections rapides, tâches simples |
| `claude-sonnet-4-5` | Revue de code, rédaction de documentation |
| `deepseek-r1` | Conception d'algorithmes, raisonnement |

## Commandes interactives

| Commande | Description |
|---------|-------------|
| `/help` | Afficher l'aide |
| `/exit` ou `Ctrl+C` | Quitter |
| `/clear` | Effacer la conversation |
| `/config` | Voir la configuration |
| `/model <name>` | Changer de modèle |
| `/tokens` | Voir l'utilisation des tokens |

## Vérifier la configuration

```bash
# Vérifier les variables d'environnement
echo $OPENAI_API_KEY

# Tester la connexion API
codex "Hello, Codex!"

# Voir la configuration
cat ~/.codex/config.toml
```

## Cas d'utilisation courants

**Revue de code :**

```bash
git diff | codex "Review these code changes"
```

**Générer un message de commit :**

```bash
git diff --staged | codex "Generate a commit message for these changes"
```

**Réparer les erreurs :**

```bash
codex "Fix the TypeScript errors in src/components/"
```

**Expliquer le code :**

```bash
cat main.py | codex "Explain what this code does"
```

## Dépannage

<AccordionGroup>
  <Accordion title="Erreur de connexion">
    - Vérifiez que le `base_url` dans `config.toml` est exactement `https://api.lemondata.cc/v1`
    - Vérifiez l'état de la connexion réseau
    - Assurez-vous qu'aucun serveur proxy n'interfère
  </Accordion>

  <Accordion title="Échec de l'authentification">
    - Vérifiez que la variable d'environnement `OPENAI_API_KEY` est configurée
    - Vérifiez que la clé commence par `sk-`
    - Assurez-vous que la clé est active dans le tableau de bord LemonData
  </Accordion>

  <Accordion title="Modèle introuvable">
    - Vérifiez que le nom du modèle correspond exactement
    - Vérifiez la disponibilité du modèle sur [lemondata.cc/en/models](https://lemondata.cc/zh-TW/models)
  </Accordion>
</AccordionGroup>
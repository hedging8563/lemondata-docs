---
title: "Créer un message"
openapi: "POST /v1/messages"
description: "Créer un message en utilisant le format de l'API Anthropic Messages"
---

## Aperçu

Cet endpoint offre une compatibilité native avec l'API Anthropic Messages. Il est adapté aux modèles Claude dotés de fonctionnalités telles que la pensée étendue (extended thinking).

<Note>
URL de base du SDK Anthropic : `https://api.lemondata.cc` (sans le suffixe `/v1`)
</Note>

## En-têtes de requête

<ParamField header="x-api-key" type="string" required>
  Votre clé API LemonData. Une alternative au Bearer token.
</ParamField>

<ParamField header="anthropic-version" type="string" required>
  Version de l'API Anthropic. Veuillez utiliser `2023-06-01`.
</ParamField>

## Corps de la requête

<ParamField body="model" type="string" required>
  ID du modèle Claude (par exemple `claude-sonnet-4-5`).
</ParamField>

<ParamField body="messages" type="array" required>
  Un tableau d'objets de message contenant `role` et `content`.
</ParamField>

<ParamField body="max_tokens" type="integer" required>
  Le nombre maximum de tokens à générer.
</ParamField>

<ParamField body="system" type="string">
  Prompt système (séparé du tableau `messages`).
</ParamField>

<ParamField body="temperature" type="number" default="1">
  Température d'échantillonnage (0-1).
</ParamField>

<ParamField body="stream" type="boolean" default="false">
  Activer les réponses en streaming.
</ParamField>

<ParamField body="thinking" type="object">
  Configuration de la pensée étendue (Claude Opus 4.5).

  - `type` (string) : défini sur `"enabled"` pour activer
  - `budget_tokens` (integer) : budget de tokens pour la pensée
</ParamField>

<ParamField body="tools" type="array">
  Outils disponibles pour le modèle.
</ParamField>

<ParamField body="tool_choice" type="object">
  Comment le modèle doit utiliser les outils. Options : `auto`, `any`, `tool` (outil spécifique).
</ParamField>

<ParamField body="top_p" type="number">
  Paramètre d'échantillonnage nucléaire (Nucleus sampling). Utilisez soit `temperature` soit `top_p`, mais pas les deux.
</ParamField>

<ParamField body="top_k" type="integer">
  Échantillonner uniquement à partir des K meilleures options pour chaque token.
</ParamField>

<ParamField body="stop_sequences" type="array">
  Séquences d'arrêt personnalisées qui forceront le modèle à arrêter la génération.
</ParamField>

<ParamField body="metadata" type="object">
  Métadonnées attachées à la requête.
</ParamField>
---
title: "Slack"
description: "Connectez votre instance Claw à un espace de travail Slack en utilisant le Socket Mode"
---

Ajoutez un assistant IA à votre espace de travail Slack en utilisant le Socket Mode — aucune URL publique n'est requise.

## Prérequis

- Un espace de travail [Slack](https://slack.com/) sur lequel vous avez un accès administrateur
- Une instance Claw ([créez-en une ici](https://lemondata.cc/dashboard/claw))

## Guide de configuration

<Steps>
  <Step title="Créer une application Slack">
    1. Allez sur [Slack API](https://api.slack.com/apps) et cliquez sur **Create New App**
    2. Choisissez **From scratch**
    3. Entrez un nom d'application (ex: "AI Assistant") et sélectionnez votre espace de travail
    4. Cliquez sur **Create App**
  </Step>
  <Step title="Activer le Socket Mode">
    1. Dans la barre latérale gauche, allez dans **Socket Mode**
    2. Basculez **Enable Socket Mode** sur ON
    3. Donnez un nom au token (ex: "claw-socket") et cliquez sur **Generate**
    4. Copiez le **App-Level Token** (commence par `xapp-`) — vous en aurez besoin
  </Step>
  <Step title="Configurer les permissions du Bot">
    1. Allez dans **OAuth & Permissions** dans la barre latérale
    2. Sous **Bot Token Scopes**, ajoutez ces scopes :
       - `chat:write` — Envoyer des messages
       - `im:history` — Lire l'historique des messages directs (DM)
       - `im:read` — Voir les messages directs (DM)
       - `im:write` — Démarrer des messages directs (DM)
       - `app_mentions:read` — Détecter les @mentions
    3. Cliquez sur **Install to Workspace** en haut
    4. Autorisez l'application
    5. Copiez le **Bot User OAuth Token** (commence par `xoxb-`)
  </Step>
  <Step title="Activer les événements">
    1. Allez dans **Event Subscriptions** dans la barre latérale
    2. Basculez **Enable Events** sur ON
    3. Sous **Subscribe to bot events**, ajoutez :
       - `message.im` — Messages dans les messages directs (DM)
       - `app_mention` — @mentions dans les canaux
    4. Cliquez sur **Save Changes**
  </Step>
  <Step title="Configurer dans le tableau de bord LemonData">
    1. Allez sur votre [tableau de bord Claw](https://lemondata.cc/dashboard/claw)
    2. Cliquez sur l'**icône des paramètres** de votre instance
    3. Ouvrez l'onglet **IM Integrations**
    4. Développez la section **Slack**
    5. Collez votre **App Token** (`xapp-...`) et votre **Bot Token** (`xoxb-...`)
    6. Cliquez sur **Save**
  </Step>
  <Step title="Commencer à discuter">
    1. Dans Slack, envoyez un message direct à votre bot ou mentionnez-le avec @ dans un canal
    2. Terminez le processus de jumelage
    3. Commencez à discuter avec l'IA !
  </Step>
</Steps>

## Contrôle d'accès

### Paramètres de groupe

Configurez l'accès aux canaux dans l'onglet **IM Integrations** de votre tableau de bord :

| Paramètre | Options | Description |
|---------|---------|-------------|
| **Group Policy** | Open (par défaut) / Allowlist / Disabled | Contrôle dans quels canaux le bot répond |
| **Require @mention** | On / Off | Le bot ne répond que lorsqu'il est @mentionné |
| **Group IDs** | Liste d'identifiants de canal | Restreindre à des canaux spécifiques (vide = tous les canaux) |
| **Group Allowed Users** | Liste d'identifiants d'utilisateur | Seuls ces utilisateurs peuvent déclencher le bot (mode allowlist) |

<Tip>
Par défaut, Slack utilise la politique de groupe **open** — le bot répond dans tous les canaux où il est invité. Utilisez **allowlist** pour restreindre à des canaux spécifiques.
</Tip>

## Dépannage

<AccordionGroup>
  <Accordion title="Le bot ne répond pas aux messages directs (DM)">
    - Vérifiez que les deux tokens sont corrects (le App Token commence par `xapp-`, le Bot Token par `xoxb-`)
    - Vérifiez que l'événement `message.im` est souscrit
    - Assurez-vous que l'application est installée dans votre espace de travail
  </Accordion>
  <Accordion title="Le bot ne répond pas aux @mentions">
    - Vérifiez que le scope `app_mentions:read` et l'événement `app_mention` sont configurés
    - Le bot doit d'abord être invité dans le canal (tapez `/invite @nomdubot`)
  </Accordion>
  <Accordion title="Erreur 'not_allowed_token_type'">
    - Assurez-vous d'utiliser le **App-Level Token** (`xapp-`) pour le champ App Token, et non le Bot Token
    - Le Bot Token (`xoxb-`) va dans le champ Bot Token
  </Accordion>
</AccordionGroup>
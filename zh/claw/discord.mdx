---
title: "Discord"
description: "通过 bot 应用将您的 Claw 实例连接到 Discord"
---

将您的 Claw 实例连接到 Discord，直接在服务器或私信（DM）中与 AI 对话。

## 前提条件

- 一个 [Discord](https://discord.com/) 账号
- 一个您拥有 **管理服务器** 权限的 Discord 服务器
- 一个 Claw 实例 ([在此创建](https://lemondata.cc/dashboard/claw))

## 设置指南

<Steps>
  <Step title="创建一个 Discord 应用">
    1. 前往 [Discord Developer Portal](https://discord.com/developers/applications)
    2. 点击 **New Application**
    3. 为其命名（例如 "My AI Bot"）并点击 **Create**
  </Step>
  <Step title="创建一个 Bot">
    1. 在您的应用中，前往 **Bot** 标签页
    2. 点击 **Add Bot** → **Yes, do it!**
    3. 在 **Privileged Gateway Intents** 下，启用：
       - **Message Content Intent** (必选)
       - **Server Members Intent** (推荐)
    4. 点击 **Reset Token** 以生成 bot token
    5. 复制该 token — 下一步将会用到
    <Warning>
    该 token 仅显示一次。如果您丢失了它，则需要重置。
    </Warning>
  </Step>
  <Step title="将 Bot 邀请至您的服务器">
    1. 前往 **OAuth2** 标签页 → **URL Generator**
    2. 在 **Scopes** 下，选择：`bot`, `applications.commands`
    3. 在 **Bot Permissions** 下，选择：`Send Messages`, `Read Message History`
    4. 复制生成的 URL 并在浏览器中打开
    5. 选择您的服务器并点击 **Authorize**
  </Step>
  <Step title="在 LemonData 控制面板中配置">
    1. 前往您的 [Claw Dashboard](https://lemondata.cc/dashboard/claw)
    2. 点击您实例上的 **设置图标**
    3. 打开 **IM Integrations** 标签页
    4. 展开 **Discord** 部分
    5. 粘贴您的 **Bot Token**
    6. 点击 **Save**
  </Step>
  <Step title="开始聊天">
    1. 在您的 Discord 服务器中，提及 (@提及) 该 bot 或向其发送私信 (DM)
    2. 第一个用户将 **自动配对** 为所有者 — 无需代码！
    3. 开始与 AI 聊天！
  </Step>
</Steps>

## 在服务器中使用

### 群组设置

在控制面板的 **IM Integrations** 标签页中配置服务器 (guild) 行为：

| 设置 | 选项 | 描述 |
|---------|---------|-------------|
| **Group Policy** | Open (默认) / Allowlist / Disabled | 控制对服务器频道的访问权限 |
| **Require @mention** | On / Off | Bot 仅在被 @提及 时响应（推荐） |
| **Group IDs** | guild ID 列表 | 限制到特定服务器（为空 = 所有服务器） |

<Note>
Discord 使用按服务器 (per-guild) 的用户白名单，而非全局群组白名单。如需进行高级的按服务器用户过滤，请直接在 OpenClaw 配置文件中进行配置。
</Note>

### 私信 (DM) 策略

控制谁可以向您的 bot 发送私信：

| 策略 | 行为 |
|--------|----------|
| **Pairing** (默认) | 新用户将获得一个配对码 — 在 WebUI 中输入即可授权 |
| **Allowlist** | 仅您指定的用户 ID 可以向 bot 发送私信 |
| **Open** | 任何人都可以向 bot 发送私信（请谨慎使用） |

## 故障排除

<AccordionGroup>
  <Accordion title="Bot 在线但没有响应">
    - 确保在 Developer Portal 中已启用 **Message Content Intent**
    - 验证 bot token 是否正确
    - 检查 bot 是否拥有在该频道读取和发送消息的权限
  </Accordion>
  <Accordion title="Bot 显示为离线">
    - 在控制面板中检查您的实例状态（应为绿色/运行中）
    - 尝试重启实例
    - 验证 token 未在 Developer Portal 中被重置
  </Accordion>
  <Accordion title="日志中出现 409 Conflict 错误">
    - 当两个实例尝试使用同一个 bot token 时会发生此情况
    - 确保只有一个 Claw 实例配置了此 token
  </Accordion>
</AccordionGroup>
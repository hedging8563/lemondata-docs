---
title: "API 参考"
description: "通过 /v1/claw API 以编程方式管理 Claw 实例"
---

所有 Claw API 端点都需要通过 `Authorization: Bearer sk-...` 请求头进行身份验证。

**基础 URL：** `https://api.lemondata.cc/v1/claw`

## 获取实例列表

```
GET /v1/claw/instances
```

返回已验证组织的所有实例。

<RequestExample>
```bash cURL
curl https://api.lemondata.cc/v1/claw/instances \
  -H "Authorization: Bearer sk-your-api-key"
```

```python Python
import requests

resp = requests.get(
    "https://api.lemondata.cc/v1/claw/instances",
    headers={"Authorization": "Bearer sk-your-api-key"}
)
print(resp.json())
```
</RequestExample>

<ResponseExample>
```json 200
{
  "instances": [
    {
      "id": "cm5abc123",
      "subdomain": "mybot",
      "url": "https://claw-mybot.lemondata.cc",
      "defaultModel": "claude-opus-4-6",
      "hasIMConfig": true,
      "status": "RUNNING",
      "paidUntil": "2026-03-10T00:00:00.000Z",
      "canRebuild": true,
      "totalPaid": 20,
      "createdAt": "2026-02-08T00:00:00.000Z"
    }
  ]
}
```
</ResponseExample>

### 实例状态值

| 状态 | 描述 |
|--------|-------------|
| `PENDING` | 刚刚创建，等待配置 |
| `PROVISIONING` | 容器正在部署中 |
| `RUNNING` | 实例处于活动状态且运行正常 |
| `STOPPED` | 因过期而停止（数据保留 7 天） |
| `FAILED` | 部署失败（已自动退款） |
| `DELETED` | 永久删除 |

---

## 创建实例

```
POST /v1/claw/instances
```

创建一个新实例，并从您的组织余额中扣除 **$20**（有效期 30 天）。

<ParamField body="subdomain" type="string" required>
  子域名（3-32 个字符，小写字母数字 + 连字符）。实例 URL：`https://claw-{subdomain}.lemondata.cc`
</ParamField>

<ParamField body="defaultModel" type="string">
  默认 AI 模型（例如 `claude-opus-4-6`，`minimax-m2.1`，`kimi-k2.5`）
</ParamField>

<RequestExample>
```bash cURL
curl -X POST https://api.lemondata.cc/v1/claw/instances \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"subdomain": "mybot", "defaultModel": "claude-opus-4-6"}'
```

```python Python
import requests

resp = requests.post(
    "https://api.lemondata.cc/v1/claw/instances",
    headers={"Authorization": "Bearer sk-your-api-key"},
    json={"subdomain": "mybot", "defaultModel": "claude-opus-4-6"}
)
print(resp.json())
```
</RequestExample>

<ResponseExample>
```json 201
{
  "id": "cm5abc123",
  "subdomain": "mybot",
  "url": "https://claw-mybot.lemondata.cc",
  "status": "PENDING",
  "paidUntil": "2026-03-10T00:00:00.000Z",
  "charged": true,
  "chargedAmount": 20
}
```
</ResponseExample>

<Warning>
余额不足将返回 **402 Payment Required**。在创建实例之前，请确保您的组织余额至少有 $20。
</Warning>

---

## 获取实例

```
GET /v1/claw/instances/:id
```

返回特定实例的详细信息。

---

## 更新实例

```
PATCH /v1/claw/instances/:id
```

更新实例配置。

<ParamField body="defaultModel" type="string | null">
  更改默认 AI 模型
</ParamField>

<ParamField body="imConfig" type="object | null">
  更新即时通讯 (IM) 平台配置（Telegram、Discord 等）
</ParamField>

<RequestExample>
```bash cURL
curl -X PATCH https://api.lemondata.cc/v1/claw/instances/cm5abc123 \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"defaultModel": "claude-sonnet-4-5"}'
```
</RequestExample>

---

## 重建实例

```
POST /v1/claw/instances/:id/rebuild
```

销毁并重新创建容器，同时保留数据 (PVC)。每天限制 **10 次重建**。

如果超过每日限制，将返回 **429 Too Many Requests**。

---

## 续费实例

```
POST /v1/claw/instances/:id/renew
```

延长 30 天计费周期（$20）。如果实例因过期而停止，它将自动重新启动。

<ResponseExample>
```json 200
{
  "id": "cm5abc123",
  "subdomain": "mybot",
  "status": "RUNNING",
  "paidUntil": "2026-04-09T00:00:00.000Z",
  "charged": true,
  "chargedAmount": 20
}
```
</ResponseExample>

---

## 健康检查

```
GET /v1/claw/health
```

返回 Claw 服务健康状态。无需身份验证。

```json
{"status": "ok", "timestamp": "2026-02-08T15:00:00.000Z"}
```
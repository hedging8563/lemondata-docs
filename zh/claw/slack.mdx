<think>**Focusing on translation scope**
**Mapping the Translation Scope**
**Detailing Translation Strategy**
**Prioritizing translation specifics**
**Implementing the translation process**
**Executing the translation**
</think>

---
title: "Slack"
description: "使用 Socket Mode 将您的 Claw 实例连接到 Slack 工作区"
---

使用 Socket Mode 向您的 Slack 工作区添加 AI 助手 —— 无需公开 URL。

## 前提条件

- 一个您拥有管理员权限的 [Slack](https://slack.com/) 工作区
- 一个 Claw 实例 ([在此创建](https://lemondata.cc/dashboard/claw))

## 设置指南

<Steps>
  <Step title="创建 Slack 应用">
    1. 前往 [Slack API](https://api.slack.com/apps) 并点击 **Create New App**
    2. 选择 **From scratch**
    3. 输入应用名称（例如 "AI Assistant"）并选择您的工作区
    4. 点击 **Create App**
  </Step>
  <Step title="启用 Socket Mode">
    1. 在左侧侧边栏中，前往 **Socket Mode**
    2. 将 **Enable Socket Mode** 切换为 ON
    3. 为 token 命名（例如 "claw-socket"）并点击 **Generate**
    4. 复制 **App-Level Token**（以 `xapp-` 开头）—— 您将需要用到它
  </Step>
  <Step title="配置机器人权限">
    1. 前往侧边栏中的 **OAuth & Permissions**
    2. 在 **Bot Token Scopes** 下，添加以下权限范围（scopes）：
       - `chat:write` — 发送消息
       - `im:history` — 读取私聊（DM）历史
       - `im:read` — 查看私聊
       - `im:write` — 发起私聊
       - `app_mentions:read` — 检测 @提及
    3. 点击顶部的 **Install to Workspace**
    4. 授权该应用
    5. 复制 **Bot User OAuth Token**（以 `xoxb-` 开头）
  </Step>
  <Step title="启用事件">
    1. 前往侧边栏中的 **Event Subscriptions**
    2. 将 **Enable Events** 切换为 ON
    3. 在 **Subscribe to bot events** 下，添加：
       - `message.im` — 私聊中的消息
       - `app_mention` — 频道中的 @提及
    4. 点击 **Save Changes**
  </Step>
  <Step title="在 LemonData 控制台中配置">
    1. 前往您的 [Claw Dashboard](https://lemondata.cc/dashboard/claw)
    2. 点击实例上的 **设置图标**
    3. 打开 **IM Integrations** 选项卡
    4. 展开 **Slack** 部分
    5. 粘贴您的 **App Token** (`xapp-...`) 和 **Bot Token** (`xoxb-...`)
    6. 点击 **Save**
  </Step>
  <Step title="开始聊天">
    1. 在 Slack 中，向您的机器人发送私聊消息或在频道中 @提及它
    2. 第一位用户将 **自动配对** 为所有者 —— 无需代码！
    3. 开始与 AI 聊天！
  </Step>
</Steps>

## 访问控制

### 群组设置

在控制台的 **IM Integrations** 选项卡中配置频道访问权限：

| 设置 | 选项 | 描述 |
|---|---|---|
| **Group Policy** | Open (默认) / Allowlist / Disabled | 控制机器人在哪些频道中响应 |
| **Require @mention** | On / Off | 机器人仅在被 @提及 时响应 |
| **Group IDs** | 频道 ID 列表 | 限制到特定频道（留空 = 所有频道） |
| **Group Allowed Users** | 用户 ID 列表 | 仅这些用户可以触发机器人（白名单模式） |

<Tip>
默认情况下，Slack 使用 **open** 群组策略 —— 机器人会在所有受邀加入的频道中响应。使用 **allowlist** 可以限制到特定频道。
</Tip>

## 故障排除

<AccordionGroup>
  <Accordion title="机器人不响应私聊">
    - 验证两个 token 是否正确（App Token 以 `xapp-` 开头，Bot Token 以 `xoxb-` 开头）
    - 检查是否已订阅 `message.im` 事件
    - 确保应用已安装到您的工作区
  </Accordion>
  <Accordion title="机器人不响应 @提及">
    - 检查 `app_mentions:read` 权限范围和 `app_mention` 事件是否已配置
    - 机器人必须先被邀请进入频道（输入 `/invite @botname`）
  </Accordion>
  <Accordion title="'not_allowed_token_type' 错误">
    - 确保您在 App Token 字段中使用的是 **App-Level Token** (`xapp-`)，而不是 Bot Token
    - Bot Token (`xoxb-`) 应填入 Bot Token 字段
  </Accordion>
</AccordionGroup>
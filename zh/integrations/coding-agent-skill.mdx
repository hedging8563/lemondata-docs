---
title: "✨ AI 编程智能体技能"
description: "一键安装，支持 Claude Code、Cursor、Copilot 等 —— 具备 Agent-First 错误恢复功能"
---

<Note>
此技能将教您的编程智能体如何通过描述需求来集成 LemonData 的 **300 多个 AI API**。它适用于 **Claude Code、Cursor、GitHub Copilot、Windsurf** 以及任何支持技能/规则文件的工具。

该 API 是 **[Agent-First](/guides/agent-first-api)** 的 —— 即使智能体猜错了模型名称，错误响应也会准确告知其修复方法。
</Note>

## 工作原理

1. **描述您的需求** —— “我想在我的 Python 项目中使用 GPT-4”
2. **智能体调用 API** —— 它可能会猜测一个模型名称或端点
3. **如果出现错误** —— API 会返回结构化提示（`did_you_mean`、`suggestions`、`retry_after`）
4. **智能体自我修正** —— 读取提示并使用正确的参数重试
5. **获取可运行的代码** —— 通常在第一次或第二次尝试时即可成功

## 安装

<Tabs>
  <Tab title="npx (推荐)">
    自动安装到 **所有检测到的编程智能体**：

    ```bash
    npx add-skill hedging8563/lemondata-api-skill -y
    ```

    支持：Claude Code、Cursor、GitHub Copilot 等。
  </Tab>
  <Tab title="Claude Code">
    **个人**（所有项目）：
    ```bash
    git clone https://github.com/hedging8563/lemondata-api-skill.git ~/.claude/skills/lemondata-api-integration
    ```

    **项目特定**（与团队共享）：
    ```bash
    git clone https://github.com/hedging8563/lemondata-api-skill.git .claude/skills/lemondata-api-integration
    ```
  </Tab>
  <Tab title="Cursor">
    ```bash
    npx add-skill hedging8563/lemondata-api-skill -y
    ```

    或者手动将技能内容复制到您的 `.cursor/rules/` 或 `.cursorrules` 文件中。
  </Tab>
  <Tab title="GitHub Copilot">
    ```bash
    npx add-skill hedging8563/lemondata-api-skill -y
    ```

    或者手动将技能内容复制到 `.github/copilot-instructions.md` 中。
  </Tab>
</Tabs>

### 验证安装

询问您的编程智能体：
```
What skills are available?
```

如果您看到 `lemondata-api-integration`，则表示安装成功。

## 获取您的 API Key

<Steps>
  <Step title="访问 LemonData">
    前往 [lemondata.cc](https://lemondata.cc)
  </Step>
  <Step title="登录">
    创建账户或登录
  </Step>
  <Step title="获取 API Key">
    导航至 [Dashboard → API Keys](https://lemondata.cc/dashboard/api) 并创建一个新 Key
  </Step>
  <Step title="复制 Key">
    您的 Key 以 `sk-...` 开头 —— 请妥善保存
  </Step>
</Steps>

<Tip>
您无需提前配置 API Key。当您使用该技能时，智能体将询问您的 Key 并将其包含在生成的代码中。
</Tip>

## 示例

### 聊天补全 (Chat Completion)

**您说：**
```
I want to use GPT-4 in my Python project
```

**智能体生成：**
```python
from openai import OpenAI

client = OpenAI(
    api_key="sk-your-api-key",
    base_url="https://api.lemondata.cc/v1"
)

response = client.chat.completions.create(
    model="gpt-4o",
    messages=[{"role": "user", "content": "Hello!"}]
)

print(response.choices[0].message.content)
```

如果智能体猜错了模型名称（例如 `gpt5`），API 将返回：
```json
{
  "error": {
    "code": "model_not_found",
    "did_you_mean": "gpt-4o",
    "suggestions": [{"id": "gpt-4o"}, {"id": "gpt-4o-mini"}],
    "hint": "Did you mean 'gpt-4o'? Use GET /v1/models to list all available models."
  }
}
```

智能体读取 `did_you_mean`，修正模型名称并重试 —— 全过程自动完成。

### 图像生成

**您说：**
```
Generate images with Flux in Node.js
```

智能体调用图像 API，处理错误，并生成包含下载和保存逻辑的完整代码。

### 语音识别

**您说：**
```
Integrate speech-to-text in my app
```

智能体生成包含正确 `/v1/audio/transcriptions` 端点和音频文件处理逻辑的代码。

## Agent-First 错误恢复

每个错误响应都包含任何编程智能体都能解析的结构化提示。详情请参阅 [完整的 Agent-First API 参考](/guides/agent-first-api)。

| 错误 | API 返回内容 | 智能体执行的操作 |
|-------|---------------------|---------------------|
| 模型名称错误 | `did_you_mean` + `suggestions` | 自动修正并重试 |
| 余额不足 | `balance_usd` + 更便宜的 `suggestions` | 切换到可负担的模型 |
| 模型不可用 | `alternatives` + `retry_after` | 切换到可用的模型 |
| 频率限制 | `retry_after`（精确秒数） | 等待并重试 |
| 上下文过长 | 针对更大型模型的 `suggestions` | 切换到更大上下文的模型 |

### 原生端点优化

当您使用 Claude 或 Gemini 模型调用 `/v1/chat/completions` 时，API 会返回优化 Header：

```
X-LemonData-Hint: This model supports native Anthropic format. Use POST /v1/messages for better performance.
X-LemonData-Native-Endpoint: /v1/messages
```

智能体将自动切换到原生端点以获得更好的性能（无需格式转换、支持 Extended Thinking、Prompt Caching）。

### 模型探索

无需查阅文档：

```bash
# 机器可读的 API 概览
curl https://lemondata.cc/llms.txt

# 按类别列出模型
curl "https://api.lemondata.cc/v1/models?category=chat" -H "Authorization: Bearer sk-KEY"
curl "https://api.lemondata.cc/v1/models?category=image" -H "Authorization: Bearer sk-KEY"

# 按功能过滤
curl "https://api.lemondata.cc/v1/models?tag=coding" -H "Authorization: Bearer sk-KEY"
```

## 支持的功能

| 类型 | 示例 |
|------|----------|
| 聊天 | GPT-4o, Claude, Gemini, DeepSeek |
| 图像生成 | Midjourney, Flux, Stable Diffusion |
| 视频生成 | Sora, Runway, Kling, Luma AI |
| 音乐生成 | Suno |
| 3D 模型 | Tripo3D |
| 音频 | Text-to-Speech, Speech-to-Text |
| 嵌入向量 (Embeddings) | text-embedding-3 |
| 重排序 (Rerank) | bce-reranker, qwen3-rerank |

## 最佳实践

<CardGroup cols={2}>
  <Card title="API Key 安全" icon="shield">
    使用环境变量。切勿将 Key 提交到 git 或在前端代码中暴露。
  </Card>
  <Card title="成本管理" icon="wallet">
    在您的 [控制面板](https://lemondata.cc/dashboard) 中设置使用限制。通过检查 `error.balance_usd` 以编程方式监控成本。
  </Card>
  <Card title="直接表达需求" icon="bullseye">
    说“我想用 Python 生成图像”，而不是“LemonData 有图像 API 吗？”
  </Card>
  <Card title="描述您的场景" icon="message">
    “我正在用 GPT-4 构建一个聊天机器人”比“使用 GPT-4”能给智能体提供更多上下文。
  </Card>
</CardGroup>

## 常见问题

<AccordionGroup>
  <Accordion title="技能未自动触发？">
    尝试在请求中提及 “LemonData” 或 “LemonData API”：
    ```
    Use LemonData to integrate GPT-4 in my project
    ```
  </Accordion>

  <Accordion title="API 如何帮助智能体找到正确的模型？">
    LemonData 的 [Agent-First API](/guides/agent-first-api) 返回结构化错误提示。如果智能体猜错了模型名称，错误信息会包含带有正确名称的 `did_you_mean` 和带有替代方案的 `suggestions`。智能体会在下次尝试时读取并自动修正。
  </Accordion>

  <Accordion title="支持哪些编程智能体？">
    任何支持技能/规则文件的工具：Claude Code、Cursor、GitHub Copilot、Windsurf 等。`npx add-skill` 安装程序会自动检测并安装到所有支持的工具中。
  </Accordion>

  <Accordion title="如何更新技能？">
    重新运行安装程序：
    ```bash
    npx add-skill hedging8563/lemondata-api-skill -y
    ```
  </Accordion>
</AccordionGroup>

## 资源

<CardGroup cols={2}>
  <Card title="Agent-First API" icon="robot" href="/guides/agent-first-api">
    结构化错误提示的完整参考
  </Card>
  <Card title="API 文档" icon="book" href="https://docs.lemondata.cc">
    完整的 API 参考
  </Card>
  <Card title="模型" icon="sparkles" href="https://lemondata.cc/zh/models">
    浏览所有 300 多个可用模型
  </Card>
  <Card title="llms.txt" icon="file-lines" href="https://lemondata.cc/llms.txt">
    面向 AI 智能体的机器可读 API 概览
  </Card>
</CardGroup>

<Info>
**有疑问？** 请查看我们的 [GitHub Issues](https://github.com/hedging8563/lemondata-api-skill/issues) 或联系 [support@lemondata.cc](mailto:support@lemondata.cc)
</Info>
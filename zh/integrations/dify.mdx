---
title: "Dify"
description: "将 LemonData 与 Dify 集成以构建 LLM 应用程序"
---

## 概览

Dify 是一个开源的 LLM 应用程序开发平台。它提供可视化提示词编排、RAG 管道、Agent 框架和 LLMOps 能力。LemonData 可以配置为 Dify 中的自定义模型供应商。

## 优势

- 通过一个接口访问 300 多个 AI 模型
- 在不更改应用程序逻辑的情况下切换模型
- 通过为每个任务选择最佳模型来优化成本
- 统一的账单和用量追踪

## 前提条件

- 具有 API 访问权限的 LemonData 账户
- Dify 安装（云端或私有化部署）

## 配置步骤

### 步骤 1：获取您的 API Key

1. 登录 [LemonData Dashboard](https://lemondata.cc/dashboard)
2. 导航至 [API Keys](https://lemondata.cc/dashboard/api)
3. 创建并复制您的 API Key（格式：`sk-...`）

### 步骤 2：添加自定义模型供应商

<Steps>
  <Step title="打开设置">
    在 Dify 中，前往 **Settings** → **Model Provider**
  </Step>
  <Step title="添加 OpenAI 兼容供应商">
    点击 **Add Model Provider** 并选择 **OpenAI-API-compatible**
  </Step>
  <Step title="配置供应商">
    输入以下设置：

    | 字段 | 值 |
    |-------|-------|
    | 供应商名称 | LemonData |
    | API Key | `sk-your-lemondata-key` |
    | API Base URL | `https://api.lemondata.cc/v1` |
  </Step>
  <Step title="添加模型">
    添加您想要使用的模型：
    - `gpt-4o`
    - `gpt-4o-mini`
    - `claude-sonnet-4-5`
    - `claude-opus-4-5`
    - `gemini-2.5-flash`
    - `gemini-2.5-pro`
    - `deepseek-r1`
  </Step>
</Steps>

### 步骤 3：测试连接

1. 选择一个模型（例如 `gpt-4o-mini`）
2. 发送一条测试消息
3. 确认您收到了回复

## 在应用程序中使用

### 聊天机器人

1. 创建一个新的 Chatbot 应用程序
2. 选择 LemonData 作为模型供应商
3. 选择您偏好的模型
4. 配置系统提示词和参数

### Agent

1. 创建一个 Agent 应用程序
2. 选择一个能力强的模型（GPT-4o, Claude）
3. 添加工具和知识库
4. 配置 Agent 行为

### 工作流

1. 创建一个 Workflow
2. 添加 LLM 节点
3. 为每个节点选择 LemonData 模型
4. 连接节点并配置数据流

## 可用模型

| 类别 | 模型 |
|----------|--------|
| 对话 | GPT-4o, GPT-4o-mini, Claude Sonnet/Opus, Gemini, DeepSeek |
| 嵌入 | text-embedding-3-small, text-embedding-3-large |
| 视觉 | GPT-4o (with images), Claude Sonnet (with images) |

## RAG 配置

对于 RAG 应用程序，请配置嵌入模型：

1. 前往 **Settings** → **Model Provider**
2. 添加嵌入模型：`text-embedding-3-small`
3. 在知识库设置中将其设为默认嵌入模型

## 最佳实践

<AccordionGroup>
  <Accordion title="从经济型模型开始">
    在测试和开发阶段使用 GPT-4o-mini，在生产环境切换到更强大的模型。
  </Accordion>

  <Accordion title="使用模型路由">
    为不同的任务配置不同的模型 —— 简单查询使用快速模型，复杂推理使用强大模型。
  </Accordion>

  <Accordion title="监控用量">
    结合使用 Dify 的 LLMOps 功能和 LemonData 控制台来追踪成本和性能。
  </Accordion>
</AccordionGroup>

## 故障排除

<AccordionGroup>
  <Accordion title="连接错误">
    - 确认 API Base URL 准确为 `https://api.lemondata.cc/v1`
    - 检查末尾是否有斜杠
    - 验证网络连接性
  </Accordion>

  <Accordion title="401 Unauthorized">
    - 仔细检查 API Key
    - 确保该 Key 在 LemonData 控制台中处于激活状态
  </Accordion>

  <Accordion title="未找到模型">
    - 确认模型名称完全匹配
    - 在 [lemondata.cc/en/models](https://lemondata.cc/zh/models) 查看模型可用性
  </Accordion>
</AccordionGroup>
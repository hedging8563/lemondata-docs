---
title: 'API 参考'
description: 'LemonData API 完整参考文档'
---

## 概览

LemonData API **兼容 OpenAI**，这意味着您只需更改基础 URL 即可使用官方 OpenAI SDK。我们还支持原生的 **Anthropic** 和 **Gemini** 请求格式。

## 基础 URL

```
https://api.lemondata.cc
```

## 身份验证

所有 API 端点都需要使用 Bearer token 进行身份验证：

```bash
Authorization: Bearer sk-your-api-key
```

从 [控制面板](https://lemondata.cc/dashboard) 获取您的 API 密钥。

<Warning>
**关于交互式演练场**：本文档网站上的演练场仅用于演示目的，不支持输入 API 密钥。要测试 API，请使用：
- **cURL** - 复制示例命令并将 `sk-your-api-key` 替换为您的实际密钥
- **Postman** - 导入我们的 [OpenAPI 规范](/openapi.json)
- **SDK** - 使用带有我们基础 URL 的 OpenAI/Anthropic SDK
</Warning>

## 支持的端点

### 对话与文本生成

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1/chat/completions` | POST | 兼容 OpenAI 的对话补全 |
| `/v1/messages` | POST | 兼容 Anthropic 的 Messages API |
| `/v1/responses` | POST | OpenAI Responses API |

### 嵌入与重排序

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1/embeddings` | POST | 创建文本嵌入 |
| `/v1/rerank` | POST | 对文档进行重排序 |

### 图像

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1/images/generations` | POST | 根据文本生成图像 |
| `/v1/images/edits` | POST | 编辑图像 |

### 音频

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1/audio/speech` | POST | 文本转语音 (TTS) |
| `/v1/audio/transcriptions` | POST | 语音转文本 (STT) |

### 视频

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1/videos/generations` | POST | 创建视频生成任务 |
| `/v1/videos/generations/{id}` | GET | 获取视频任务状态 |

### 音乐

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1/music/generations` | POST | 创建音乐生成任务 |
| `/v1/music/generations/{id}` | GET | 获取音乐任务状态 |

### 3D 生成

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1/3d/generations` | POST | 创建 3D 模型生成任务 |
| `/v1/3d/generations/{id}` | GET | 获取 3D 任务状态 |

### 模型

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1/models` | GET | 列出所有可用模型 |
| `/v1/models/{model}` | GET | 获取特定模型信息 |

### Gemini (v1beta)

原生 Google Gemini API 格式支持：

| 端点 | 方法 | 描述 |
|----------|--------|-------------|
| `/v1beta/models/{model}:generateContent` | POST | 生成内容 (Gemini 格式) |
| `/v1beta/models/{model}:streamGenerateContent` | POST | 流式生成内容 (Gemini 格式) |

<Note>
除了标准的 Bearer token 外，Gemini 端点还支持 `?key=` 查询参数身份验证。
</Note>

## 响应格式

所有响应都遵循一致的格式：

### 成功响应

```json
{
  "id": "chatcmpl-abc123",
  "object": "chat.completion",
  "created": 1234567890,
  "model": "gpt-4o",
  "choices": [...],
  "usage": {
    "prompt_tokens": 10,
    "completion_tokens": 20,
    "total_tokens": 30
  }
}
```

### 路由透明度

所有响应都包含一个带有渠道信息的 `_routing` 字段：

```json
{
  "id": "chatcmpl-abc123",
  ...,
  "_routing": {
    "channel": {
      "id": "ch_xxx",
      "name": "channel-name",
      "provider": "openai",
      "channelType": "PLATFORM"
    },
    "cached": false,
    "retryCount": 0
  }
}
```

| 字段 | 描述 |
|-------|-------------|
| `channel.id` | 使用的渠道标识符 |
| `channel.provider` | 上游提供商 (openai, anthropic 等) |
| `channel.channelType` | `PLATFORM` (LemonData) 或 `PRIVATE` (BYOK) |
| `cached` | 响应是否来自缓存 |
| `retryCount` | 重试次数（如果有） |

### 错误响应

```json
{
  "error": {
    "message": "Invalid API key provided",
    "type": "invalid_api_key",
    "code": "invalid_api_key"
  }
}
```

## 速率限制

速率限制基于角色，并可由管理员配置。默认值：

| 角色 | 请求数/分钟 |
|------|-------------|
| 用户 | 60 |
| 合作伙伴 | 300 |
| VIP | 1,000 |

<Note>
如需自定义速率限制，请联系支持团队。确切数值可能因账户配置而异。
</Note>

当超过速率限制时，API 会返回 `429` 状态码，并带有 `Retry-After` 响应头，指示需要等待多长时间。

## OpenAPI 规范

<Card
  title="OpenAPI 规范"
  icon="file-code"
  href="/openapi.json"
>
  下载完整的 OpenAPI 3.0 规范
</Card>

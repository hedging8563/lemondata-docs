---
title: "إنشاء رسالة"
openapi: "POST /v1/messages"
description: "إنشاء رسالة باستخدام تنسيق Anthropic Messages API"
---

## نظرة عامة

يوفر هذا المسار توافقاً أصلياً مع Anthropic Messages API. وهو مناسب لنماذج Claude التي تدعم ميزات مثل التفكير الموسع (extended thinking).

<Note>
Base URL لـ Anthropic SDK: `https://api.lemondata.cc` (بدون لاحقة `/v1`)
</Note>

## رؤوس الطلب

<ParamField header="x-api-key" type="string" required>
  مفتاح LemonData API الخاص بك. بديل لـ Bearer token.
</ParamField>

<ParamField header="anthropic-version" type="string" required>
  إصدار Anthropic API. يرجى استخدام `2023-06-01`.
</ParamField>

## جسم الطلب

<ParamField body="model" type="string" required>
  معرف نموذج Claude (مثل `claude-sonnet-4-5`).
</ParamField>

<ParamField body="messages" type="array" required>
  مصفوفة من كائنات الرسائل التي تحتوي على `role` و `content`.
</ParamField>

<ParamField body="max_tokens" type="integer" required>
  الحد الأقصى لعدد `token` التي سيتم إنشاؤها.
</ParamField>

<ParamField body="system" type="string">
  موجه النظام (System prompt) (منفصل عن مصفوفة `messages`).
</ParamField>

<ParamField body="temperature" type="number" default="1">
  درجة حرارة العينة (0-1).
</ParamField>

<ParamField body="stream" type="boolean" default="false">
  تمكين استجابة البث (stream).
</ParamField>

<ParamField body="thinking" type="object">
  تكوين التفكير الموسع (Claude Opus 4.5).

  - `type` (string): اضبطه على `"enabled"` للتمكين
  - `budget_tokens` (integer): ميزانية `token` للتفكير
</ParamField>

<ParamField body="tools" type="array">
  الأدوات المتاحة للنموذج.
</ParamField>

<ParamField body="tool_choice" type="object">
  كيفية استخدام النموذج للأدوات. الخيارات: `auto`، `any`، `tool` (أداة محددة).
</ParamField>

<ParamField body="top_p" type="number">
  معلمة Nucleus sampling. يرجى استخدام `temperature` أو `top_p` وليس كليهما.
</ParamField>

<ParamField body="top_k" type="integer">
  أخذ العينات من أفضل `K` خيارات لكل `token` فقط.
</ParamField>

<ParamField body="stop_sequences" type="array">
  تسلسلات إيقاف مخصصة ستؤدي إلى توقف النموذج عن الإنشاء.
</ParamField>

<ParamField body="metadata" type="object">
  البيانات التعريفية (metadata) المرفقة بالطلب.
</ParamField>
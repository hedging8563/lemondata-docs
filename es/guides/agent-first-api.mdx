---
title: "✨ API orientada a agentes"
description: "Sugerencias de error estructuradas para que los agentes de IA se corrijan automáticamente en el primer reintento"
---

## Resumen

La API orientada a agentes de LemonData enriquece las respuestas de error con sugerencias estructuradas que los agentes de IA pueden analizar y procesar de inmediato: sin búsquedas web, sin consultas de documentación y sin conjeturas.

Cada respuesta de error incluye campos opcionales como `did_you_mean`, `suggestions`, `hint`, `retryable` y `retry_after` dentro del objeto `error` estándar. Estos campos son compatibles con versiones anteriores; los clientes que no los utilizan no notarán ninguna diferencia.

## Campos de sugerencia de error

Todos los campos de sugerencia son extensiones opcionales dentro del objeto `error`:

| Campo | Tipo | Descripción |
|-------|------|-------------|
| `did_you_mean` | `string` | Nombre del modelo con la coincidencia más cercana |
| `suggestions` | `array` | Modelos recomendados con metadatos |
| `alternatives` | `array` | Modelos alternativos disponibles actualmente |
| `hint` | `string` | Guía de pasos a seguir legible por humanos/agentes |
| `retryable` | `boolean` | Indica si reintentar la misma solicitud podría tener éxito |
| `retry_after` | `number` | Segundos a esperar antes de reintentar |
| `balance_usd` | `number` | Saldo actual de la cuenta en USD |
| `estimated_cost_usd` | `number` | Costo estimado de la solicitud fallida |

## Ejemplos de códigos de error

### model_not_found (400)

Cuando el nombre de un modelo no coincide con ningún modelo activo:

```json
{
  "error": {
    "message": "Model 'gpt5' not found",
    "type": "invalid_request_error",
    "param": "model",
    "code": "model_not_found",
    "did_you_mean": "gpt-4o",
    "suggestions": [
      {"id": "gpt-4o"},
      {"id": "gpt-4o-mini"},
      {"id": "claude-sonnet-4-5"}
    ],
    "hint": "Did you mean 'gpt-4o'? Use GET /v1/models to list all available models."
  }
}
```

La resolución de `did_you_mean` utiliza:
1. Mapeo de alias estáticos (a partir de datos de error de producción)
2. Coincidencia de cadenas normalizada (elimina guiones, no distingue entre mayúsculas y minúsculas)
3. Coincidencia por distancia de edición (umbral ≤ 3)

### insufficient_balance (402
---
title: "メッセージの作成"
openapi: "POST /v1/messages"
description: "Anthropic Messages API 形式を使用してメッセージを作成します"
---

## 概要

このエンドポイントは、ネイティブな Anthropic Messages API 互換性を提供します。拡張思考（extended thinking）などの機能を備えた Claude モデルに適しています。

<Note>
Anthropic SDK の Base URL：`https://api.lemondata.cc`（`/v1` サフィックスなし）
</Note>

## リクエストヘッダー

<ParamField header="x-api-key" type="string" required>
  あなたの LemonData API キー。Bearer token の代替手段です。
</ParamField>

<ParamField header="anthropic-version" type="string" required>
  Anthropic API バージョン。`2023-06-01` を使用してください。
</ParamField>

## リクエストボディ

<ParamField body="model" type="string" required>
  Claude モデル ID（例：`claude-sonnet-4-5`）。
</ParamField>

<ParamField body="messages" type="array" required>
  `role` と `content` を含むメッセージオブジェクトの配列。
</ParamField>

<ParamField body="max_tokens" type="integer" required>
  生成される最大 token 数。
</ParamField>

<ParamField body="system" type="string">
  システムプロンプト（messages 配列とは別）。
</ParamField>

<ParamField body="temperature" type="number" default="1">
  サンプリング温度（0-1）。
</ParamField>

<ParamField body="stream" type="boolean" default="false">
  ストリーミングレスポンスを有効にします。
</ParamField>

<ParamField body="thinking" type="object">
  拡張思考設定（Claude Opus 4.5）。

  - `type` (string)：有効にするには `"enabled"` に設定します
  - `budget_tokens` (integer)：思考の token 予算
</ParamField>

<ParamField body="tools" type="array">
  モデルが利用可能なツール。
</ParamField>

<ParamField body="tool_choice" type="object">
  モデルがツールをどのように使用するか。オプション：`auto`、`any`、`tool`（特定のツール）。
</ParamField>

<ParamField body="top_p" type="number">
  核サンプリング（Nucleus sampling）パラメータ。temperature または top_p のいずれか一方を使用し、両方は使用しないでください。
</ParamField>

<ParamField body="top_k" type="integer">
  各 token の上位 K 個の選択肢からのみサンプリングします。
</ParamField>

<ParamField body="stop_sequences" type="array">
  モデルの生成を停止させるカスタム停止シーケンス。
</ParamField>

<ParamField body="metadata" type="object">
  リクエストに付加されるメタデータ。
</ParamField>
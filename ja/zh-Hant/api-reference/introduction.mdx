---
title: 'API リファレンス'
description: 'LemonData API の完全なリファレンスガイド'
---

## 概要

LemonData API は **OpenAI と互換性** があります。これは、Base URL を変更するだけで公式の OpenAI SDK を使用できることを意味します。また、ネイティブの **Anthropic** および **Gemini** リクエスト形式もサポートしています。

## Base URL

```
https://api.lemondata.cc
```

## 認証

すべての API エンドポイントで Bearer token を使用した認証が必要です：

```bash
Authorization: Bearer sk-your-api-key
```

[コンソール](https://lemondata.cc/dashboard) から API キーを取得してください。

<Warning>
**インタラクティブな Playground について**：このドキュメントサイトの Playground はデモ専用であり、API キーの入力はサポートされていません。API をテストするには、以下を使用してください：
- **cURL** - サンプルコマンドをコピーし、`sk-your-api-key` を実際のキーに置き換えてください
- **Postman** - 当社の [OpenAPI 仕様](/openapi.json) をインポートしてください
- **SDK** - OpenAI/Anthropic SDK を当社の Base URL と組み合わせて使用してください
</Warning>

## サポートされているエンドポイント

### チャットとテキスト生成

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/chat/completions` | POST | OpenAI 互換のチャット完了 |
| `/v1/messages` | POST | Anthropic 互換のメッセージ API |
| `/v1/responses` | POST | OpenAI Responses API |

### 埋め込みと再ランキング

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/embeddings` | POST | テキスト埋め込みの作成 |
| `/v1/rerank` | POST | ドキュメントの再ランキング |

### 画像

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/images/generations` | POST | テキストから画像を生成 |
| `/v1/images/edits` | POST | 画像を編集 |

### 音声

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/audio/speech` | POST | テキスト読み上げ (TTS) |
| `/v1/audio/transcriptions` | POST | 音声文字変換 (STT) |

### 動画

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/videos/generations` | POST | 動画生成タスクの作成 |
| `/v1/videos/generations/{id}` | GET | 動画タスクのステータスを取得 |

### 音楽

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/music/generations` | POST | 音楽生成タスクの作成 |
| `/v1/music/generations/{id}` | GET | 音楽タスクのステータスを取得 |

### 3D 生成

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/3d/generations` | POST | 3D モデル生成タスクの作成 |
| `/v1/3d/generations/{id}` | GET | 3D タスクのステータスを取得 |

### モデル

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/models` | GET | 利用可能なすべてのモデルをリスト |
| `/v1/models/{model}` | GET | 特定のモデル情報を取得 |

### Gemini (v1beta)

ネイティブの Google Gemini API 形式のサポート：

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1beta/models/{model}:generateContent` | POST | コンテンツの生成 (Gemini 形式) |
| `/v1beta/models/{model}:streamGenerateContent` | POST | コンテンツのストリーム生成 (Gemini 形式) |

<Note>
Gemini エンドポイントは、標準の Bearer token に加えて、`?key=` クエリパラメータによる認証もサポートしています。
</Note>

## レスポンス形式

すべてのレスポンスは一貫した形式に従います：

### 成功レスポンス

```json
{
  "id": "chatcmpl-abc123",
  "object": "chat.completion",
  "created": 1234567890,
  "model": "gpt-4o",
  "choices": [...],
  "usage": {
    "prompt_tokens": 10,
    "completion_tokens": 20,
    "total_tokens": 30
  }
}
```

### ルーティングの透明性

すべてのレスポンスには、チャネル情報を含む `_routing` フィールドが含まれています：

```json
{
  "id": "chatcmpl-abc123",
  ...,
  "_routing": {
    "channel": {
      "id": "ch_xxx",
      "name": "channel-name",
      "provider": "openai",
      "channelType": "PLATFORM"
    },
    "cached": false,
    "retryCount": 0
  }
}
```

| フィールド | 説明 |
|-------|-------------|
| `channel.id` | 使用されたチャネル識別子 |
| `channel.provider` | アップストリームプロバイダー (openai, anthropic など) |
| `channel.channelType` | `PLATFORM` (LemonData) または `PRIVATE` (BYOK) |
| `cached` | レスポンスがキャッシュからのものかどうか |
| `retryCount` | リトライ回数（ある場合） |

### エラーレスポンス

```json
{
  "error": {
    "message": "Invalid API key provided",
    "type": "invalid_api_key",
    "code": "invalid_api_key"
  }
}
```

## レート制限

レート制限はロールに基づいており、管理者によって設定可能です。デフォルト値：

| ロール | リクエスト数/分 |
|------|-------------|
| ユーザー | 60 |
| パートナー | 300 |
| VIP | 1,000 |

<Note>
カスタムレート制限については、サポートチームにお問い合わせください。正確な数値はアカウント設定によって異なる場合があります。
</Note>

すべてのレスポンスにはレート制限ヘッダーが含まれています：

```
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 55
X-RateLimit-Reset: 1234567890
```

## OpenAPI 仕様

<Card
  title="OpenAPI 仕様"
  icon="file-code"
  href="/openapi.json"
>
  完全な OpenAPI 3.0 仕様をダウンロード
</Card>
---
title: "✨ マルチフォーマット API"
description: "たった1つの API key で OpenAI、Anthropic、または Gemini フォーマットを使用可能"
---

## 概要

LemonData は、単一の API key で **3つのネイティブ API フォーマット** をサポートしています。設定を変更することなく、ユースケースに最適なフォーマットを選択してください。

<CardGroup cols={3}>
  <Card title="OpenAI フォーマット" icon="plug">
    `/v1/chat/completions`
    標準的なフォーマットで、最も幅広い互換性があります
  </Card>
  <Card title="Anthropic フォーマット" icon="message">
    `/v1/messages`
    思考の拡張、ネイティブな Claude 機能
  </Card>
  <Card title="Gemini フォーマット" icon="sparkles">
    `/v1beta/models/:model:generateContent`
    Google エコシステムの統合
  </Card>
</CardGroup>

## なぜマルチフォーマットを使用するのか？

| メリット | 説明 |
|---------|-------------|
| **SDK の切り替えが不要** | お好みの SDK を使用して、あらゆるモデルを呼び出し可能 |
| **ネイティブ機能** | 特定のフォーマット固有の機能にアクセス |
| **簡単な移行** | base URL を変更するだけで、公式 API から切り替え可能 |
| **一元化された請求** | 1つのアカウント、1つの API key で、すべてのフォーマットをサポート |

## フォーマットの比較

| 機能 | OpenAI | Anthropic | Gemini |
|---------|--------|-----------|--------|
| **Endpoint** | `/v1/chat/completions` | `/v1/messages` | `/v1beta/models/:model:generateContent` |
| **認証ヘッダー** | `Authorization: Bearer` | `x-api-key` | `Authorization: Bearer` |
| **System Prompt** | messages 配列内 | 独立した `system` フィールド | `systemInstruction` 内 |
| **思考の拡張 (Extended Thinking)** | ❌ | ✅ | ❌ |
| **ストリーミング (Streaming)** | ✅ SSE | ✅ SSE | ✅ SSE |
| **ツール呼び出し (Tool Use)** | ✅ | ✅ | ✅ |
| **ビジョン (Vision)** | ✅ | ✅ | ✅ |

## OpenAI フォーマット

最も互換性の高いフォーマットです。すべての LemonData モデルに適用可能です。

```python
from openai import OpenAI

client = OpenAI(
    api_key="sk-your-lemondata-key",
    base_url="https://api.lemondata.cc/v1"
)

# 適用於任何模型
response = client.chat.completions.create(
    model="claude-sonnet-4-5",  # 透過 OpenAI 格式調用 Claude
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Hello!"}
    ]
)
```

**最適なケース：**
- 一般的な用途
- 既存の OpenAI SDK 統合
- 最大限の互換性

## Anthropic フォーマット

ネイティブな Anthropic Messages API です。思考の拡張などの Claude 固有の機能を使用する場合に必須です。

```python
from anthropic import Anthropic

client = Anthropic(
    api_key="sk-your-lemondata-key",
    base_url="https://api.lemondata.cc"  # 無需 /v1 後綴！
)

message = client.messages.create(
    model="claude-sonnet-4-5",
    max_tokens=1024,
    system="You are a helpful assistant.",  # 獨立的 system 欄位
    messages=[
        {"role": "user", "content": "Hello!"}
    ]
)
```

### 思考の拡張 (Claude Opus 4.5)

Anthropic フォーマットでのみ提供されます：

```python
message = client.messages.create(
    model="claude-opus-4-5",
    max_tokens=16000,
    thinking={
        "type": "enabled",
        "budget_tokens": 10000
    },
    messages=[{"role": "user", "content": "Solve this complex problem..."}]
)

# 存取思考過程
for block in message.content:
    if block.type == "thinking":
        print(f"Thinking: {block.thinking}")
    elif block.type == "text":
        print(f"Answer: {block.text}")
```

**最適なケース：**
- Claude 固有の機能
- 思考の拡張モード
- ネイティブな Anthropic SDK ユーザー

## Gemini フォーマット

Google エコシステム統合のための、ネイティブな Google Gemini API フォーマットです。

```bash
curl "https://api.lemondata.cc/v1beta/models/gemini-2.5-flash:generateContent" \
  -H "Authorization: Bearer sk-your-lemondata-key" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [{
      "parts": [{"text": "Hello!"}]
    }],
    "systemInstruction": {
      "parts": [{"text": "You are a helpful assistant."}]
    }
  }'
```

### ストリーミング (Streaming)

```bash
curl "https://api.lemondata.cc/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse" \
  -H "Authorization: Bearer sk-your-lemondata-key" \
  -H "Content-Type: application/json" \
  -d '{
    "contents": [{"parts": [{"text": "Write a story"}]}]
  }'
```

**最適なケース：**
- Google Cloud 統合
- 既存の Gemini SDK コード
- ネイティブな Gemini 機能

## 適切なフォーマットの選択

```mermaid
graph TD
    A[どのフォーマットを選択すべきか？] --> B{Claude の思考の拡張が必要ですか？}
    B -->|はい| C[Anthropic フォーマットを使用]
    B -->|いいえ| D{既存のコードベースは？}
    D -->|OpenAI SDK| E[OpenAI フォーマットを使用]
    D -->|Anthropic SDK| C
    D -->|Gemini SDK| F[Gemini フォーマットを使用]
    D -->|新規プロジェクト| E
```

## 移行ガイド

### 公式 OpenAI API からの移行

```python
# 移行前 (OpenAI)
client = OpenAI(api_key="sk-openai-key")

# 移行後 (LemonData)
client = OpenAI(
    api_key="sk-lemondata-key",
    base_url="https://api.lemondata.cc/v1"  # この行を追加
)
# これだけです！同じコードで動作します
```

### 公式 Anthropic API からの移行

```python
# 移行前 (Anthropic)
client = Anthropic(api_key="sk-ant-key")

# 移行後 (LemonData)
client = Anthropic(
    api_key="sk-lemondata-key",
    base_url="https://api.lemondata.cc"  # この行を追加 (/v1 は不要です！)
)
```

### Google AI Studio からの移行

```python
# 移行前 (Google)
import google.generativeai as genai
genai.configure(api_key="google-api-key")

# 移行後 (LemonData) - 使用 REST API
import requests

response = requests.post(
    "https://api.lemondata.cc/v1beta/models/gemini-2.5-flash:generateContent",
    headers={"Authorization": "Bearer sk-lemondata-key"},
    json={"contents": [{"parts": [{"text": "Hello"}]}]}
)
```

## モデル間の互換性

LemonData の魔法：**あらゆる SDK** を **あらゆるモデル** と組み合わせて使用できます。ゲートウェイがフォーマット変換を自動的に処理します。

### あらゆる SDK → あらゆるモデル

```python
# 使用 Anthropic SDK 調用 GPT-4o（自動轉換為 OpenAI 格式）
from anthropic import Anthropic

client = Anthropic(
    api_key="sk-lemondata-key",
    base_url="https://api.lemondata.cc"
)

response = client.messages.create(
    model="gpt-4o",  # ✅ 正常に動作します！自動変換済み
    max_tokens=1024,
    messages=[{"role": "user", "content": "Hello!"}]
)

# 同一個 SDK，不同的模型——無需更改程式碼
response = client.messages.create(model="gemini-2.5-flash", ...)  # ✅ 正常に動作します！
response = client.messages.create(model="deepseek-r1", ...)       # ✅ 正常に動作します！
```

### OpenAI SDK → すべてのモデル

```python
from openai import OpenAI

client = OpenAI(base_url="https://api.lemondata.cc/v1", api_key="sk-...")

# 以下のモデルはすべて同じ SDK で動作します：
response = client.chat.completions.create(model="gpt-4o", ...)
response = client.chat.completions.create(model="claude-sonnet-4-5", ...)
response = client.chat.completions.create(model="gemini-2.5-flash", ...)
```

### 業界比較

| プラットフォーム | OpenAI フォーマット | Anthropic フォーマット | Gemini フォーマット | Responses API |
|----------|:---:|:---:|:---:|:---:|
| **LemonData** | ✅ すべてのモデル | ✅ すべてのモデル | ✅ すべてのモデル | ✅ すべてのモデル |
| OpenRouter | ✅ すべてのモデル | ❌ | ❌ | ❌ |
| Together AI | ✅ すべてのモデル | ❌ | ❌ | ❌ |
| Fireworks | ✅ すべてのモデル | ❌ | ❌ | ❌ |

<Note>
フォーマットをまたいでほとんどの機能がサポートされていますが、特定のフォーマット固有の機能（Anthropic の思考の拡張など）には、ネイティブフォーマットを使用する必要があります。
</Note>
---
title: "Codex CLI"
description: "LemonData API を使用するための OpenAI Codex CLI の設定"
---

## 概要

OpenAI Codex は、ターミナルでコードの読み取り、修正、実行ができる軽量なコーディングエージェントとして機能するオープンソースのコマンドラインツール (CLI) です。GPT モデルに基づいて構築されており、コード生成に最適化されています。

## システム要件

- **作業システム**：macOS, Linux (公式サポート), Windows (WSL 経由)
- **Node.js**：バージョン 18+
- **npm**：バージョン 10.x.x 以上

## インストール

```bash
sudo npm install -g @openai/codex@latest
```

インストールの確認：

```bash
codex --version
```

## 設定

### ステップ 1：API Key の設定

**一時的（現在のセッション）：**

```bash
export OPENAI_API_KEY="sk-your-lemondata-key"
```

**永続的な設定：**

`~/.bashrc`、`~/.zshrc`、または `~/.bash_profile` に追加します：

```bash
export OPENAI_API_KEY="sk-your-lemondata-key"
```

その後、再読み込みします：

```bash
source ~/.zshrc  # または source ~/.bashrc
```

### ステップ 2：config.toml の設定

`~/.codex/config.toml` を編集します：

```toml
model = "gpt-4o"
model_provider = "lemondata"

[model_providers.lemondata]
name = "LemonData"
base_url = "https://api.lemondata.cc/v1"
env_key = "OPENAI_API_KEY"
wire_api = "chat"
```

<Note>
設定ファイルが存在しない場合は、一度 `codex` を実行してファイルを生成してから編集してください。
</Note>

## 基本的な使い方

**対話モードの起動：**

```bash
codex
```

**直接コマンド：**

```bash
codex "Fix the bug in main.py line 42"
```

**モデルの指定：**

```bash
codex -m gpt-4o "Build a REST API server"
```

## 利用可能なモデル

| モデル | ユースケース |
|-------|----------|
| `gpt-4o` | 複雑なコーディングタスク、アーキテクチャ設計 |
| `gpt-4o-mini` | 迅速な修正、簡単なタスク |
| `claude-sonnet-4-5` | コードレビュー、ドキュメント作成 |
| `deepseek-r1` | アルゴリズム設計、推論 |

## 対話コマンド

| コマンド | 説明 |
|---------|-------------|
| `/help` | ヘルプを表示 |
| `/exit` または `Ctrl+C` | 終了 |
| `/clear` | 会話をクリア |
| `/config` | 設定を表示 |
| `/model <name>` | モデルを切り替え |
| `/tokens` | token 使用量を確認 |

## 設定の確認

```bash
# 環境変数の確認
echo $OPENAI_API_KEY

# API 接続のテスト
codex "Hello, Codex!"

# 設定の確認
cat ~/.codex/config.toml
```

## 一般的なユースケース

**コードレビュー：**

```bash
git diff | codex "Review these code changes"
```

**commit メッセージの生成：**

```bash
git diff --staged | codex "Generate a commit message for these changes"
```

**エラーの修正：**

```bash
codex "Fix the TypeScript errors in src/components/"
```

**コードの解説：**

```bash
cat main.py | codex "Explain what this code does"
```

## トラブルシューティング

<AccordionGroup>
  <Accordion title="接続エラー">
    - `config.toml` 内の `base_url` が正確に `https://api.lemondata.cc/v1` であることを確認してください
    - ネットワーク接続状態を確認してください
    - プロキシサーバーによる干渉がないことを確認してください
  </Accordion>

  <Accordion title="認証失敗">
    - `OPENAI_API_KEY` 環境変数が設定されていることを確認してください
    - キーが `sk-` で始まっているか確認してください
    - LemonData コントロールパネルでキーが有効であることを確認してください
  </Accordion>

  <Accordion title="モデルが見つかりません">
    - モデル名が完全に一致しているか確認してください
    - [lemondata.cc/en/models](https://lemondata.cc/zh-TW/models) でモデルの利用可能性を確認してください
  </Accordion>
</AccordionGroup>
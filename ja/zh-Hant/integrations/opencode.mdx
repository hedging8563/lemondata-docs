---
title: "OpenCode"
description: "LemonData API を使用するための OpenCode の設定"
---

## 概要

OpenCode は、ターミナルで動作するオープンソースの AI コーディングアシスタントです。複数の LLM プロバイダーをサポートしており、LemonData の API を使用して 300 以上のモデルにアクセスするように設定できます。

## インストール

<Tabs>
  <Tab title="インストールスクリプト">
    ```bash
    curl -fsSL https://opencode.ai/install | bash
    ```
  </Tab>
  <Tab title="Homebrew">
    ```bash
    brew install opencode-ai/tap/opencode
    ```

    または、コミュニティの tap（より頻繁に更新されます）を使用します：
    ```bash
    brew install anomalyco/tap/opencode
    ```
  </Tab>
  <Tab title="Go">
    ```bash
    go install github.com/opencode-ai/opencode@latest
    ```
  </Tab>
</Tabs>

インストールの確認：

```bash
opencode --version
```

## 設定

### ステップ 1：環境変数の設定

```bash
export OPENAI_API_KEY="sk-your-lemondata-key"
export LOCAL_ENDPOINT="https://api.lemondata.cc/v1"
```

永続的に設定するには、これらを `~/.bashrc` または `~/.zshrc` に追加してください：

```bash
echo 'export OPENAI_API_KEY="sk-your-lemondata-key"' >> ~/.zshrc
echo 'export LOCAL_ENDPOINT="https://api.lemondata.cc/v1"' >> ~/.zshrc
source ~/.zshrc
```

### ステップ 2：OpenCode の設定

プロジェクトのルートディレクトリで `~/.config/opencode/opencode.json`（グローバル）または `opencode.json` を作成または編集します：

```json
{
  "provider": {
    "openai": {
      "options": {
        "apiKey": "sk-your-lemondata-key",
        "baseURL": "https://api.lemondata.cc/v1"
      }
    }
  },
  "model": "gpt-4o",
  "agent": {
    "coder": {
      "model": "gpt-4o"
    }
  }
}
```

## 基本的な使い方

**対話モードの起動：**

```bash
opencode
```

**プロンプトを使用して実行：**

```bash
opencode "Explain this codebase"
```

**モデルの指定：**

```bash
opencode --model gpt-4o "Fix the bugs in main.py"
```

## 利用可能なモデル

| モデル | 最適な用途 |
|-------|----------|
| `gpt-4o` | 複雑なタスク、コードアーキテクチャ |
| `gpt-4o-mini` | クイック修正、単純なクエリ |
| `claude-sonnet-4-5` | コードレビュー、ドキュメント作成 |
| `claude-opus-4-5` | 複雑な推論 |
| `gemini-2.5-flash` | 高速なレスポンス |
| `deepseek-r1` | アルゴリズム設計 |

## よく使われるコマンド

**コードの分析：**

```bash
opencode "What does this function do?" < src/utils.ts
```

**コードの生成：**

```bash
opencode "Create a REST API with Express"
```

**変更のレビュー：**

```bash
git diff | opencode "Review these changes"
```

**エラーの修正：**

```bash
opencode "Fix the TypeScript errors in this project"
```

## インタラクティブコマンド

| コマンド | 説明 |
|---------|-------------|
| `/help` | 利用可能なコマンドを表示 |
| `/model <name>` | 別のモデルに切り替え |
| `/clear` | 会話履歴をクリア |
| `/exit` | OpenCode を終了 |

## トラブルシューティング

<AccordionGroup>
  <Accordion title="接続エラー">
    - `LOCAL_ENDPOINT` が `https://api.lemondata.cc/v1` に設定されていることを確認してください
    - ネットワーク接続を確認してください
    - `curl https://api.lemondata.cc/v1/models` を使用してテストを試みてください
  </Accordion>

  <Accordion title="認証失敗">
    - `OPENAI_API_KEY` 環境変数が設定されていることを確認してください
    - キーが `sk-` で始まっているか確認してください
    - LemonData コントロールパネルでキーが有効であることを確認してください
  </Accordion>

  <Accordion title="モデルが見つかりません">
    - 設定内のモデル名が完全に一致しているか確認してください
    - [lemondata.cc/en/models](https://lemondata.cc/zh-TW/models) でモデルの利用可能性を確認してください
  </Accordion>
</AccordionGroup>

## ベストプラクティス

<AccordionGroup>
  <Accordion title="プロジェクトコンテキストの使用">
    コードベースをより良く理解するために、プロジェクトのルートディレクトリから OpenCode を実行してください。
  </Accordion>

  <Accordion title="適切なモデルの選択">
    単純なタスクには高速なモデル (gpt-4o-mini) を、複雑なタスクには強力なモデル (gpt-4o, claude) を使用してください。
  </Accordion>

  <Accordion title="生成されたコードのレビュー">
    プロジェクトに変更を適用する前に、必ず AI が生成したコードをレビューしてください。
  </Accordion>
</AccordionGroup>
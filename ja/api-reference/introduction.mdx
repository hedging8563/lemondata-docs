---
title: 'APIリファレンス'
description: 'LemonData APIの完全なリファレンス'
---

## 概要

LemonData APIは**OpenAI互換**です。つまり、ベースURLを変更するだけで公式のOpenAI SDKを使用できます。また、ネイティブの**Anthropic**および**Gemini**のリクエスト形式もサポートしています。

## ベースURL

```
https://api.lemondata.cc
```

## 認証

すべてのAPIエンドポイントは、Bearerトークンを使用した認証が必要です。

```bash
Authorization: Bearer sk-your-api-key
```

[ダッシュボード](https://lemondata.cc/dashboard)からAPIキーを取得してください。

## サポートされているエンドポイント

### チャットとテキスト生成

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/chat/completions` | POST | OpenAI互換のチャット完了 |
| `/v1/messages` | POST | Anthropic互換のメッセージAPI |
| `/v1/responses` | POST | OpenAI Responses API |

### 埋め込みとリランク

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/embeddings` | POST | テキスト埋め込みの作成 |
| `/v1/rerank` | POST | ドキュメントのリランク |

### 画像

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/images/generations` | POST | テキストからの画像生成 |
| `/v1/images/edits` | POST | 画像の編集 |

### オーディオ

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/audio/speech` | POST | テキスト読み上げ (TTS) |
| `/v1/audio/transcriptions` | POST | 音声文字変換 (STT) |

### ビデオ

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/videos/generations` | POST | ビデオ生成タスクの作成 |
| `/v1/videos/generations/{id}` | GET | ビデオタスクのステータス取得 |

### 音楽

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/music/generations` | POST | 音楽生成タスクの作成 |
| `/v1/music/generations/{id}` | GET | 音楽タスクのステータス取得 |

### 3D生成

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/3d/generations` | POST | 3Dモデル生成タスクの作成 |
| `/v1/3d/generations/{id}` | GET | 3Dタスクのステータス取得 |

### モデル

| エンドポイント | メソッド | 説明 |
|----------|--------|-------------|
| `/v1/models` | GET | 利用可能なすべてのモデルをリスト |
| `/v1/models/{model}` | GET | 特定のモデル情報の取得 |

## レスポンス形式

すべてのレスポンスは一貫した形式に従います。

### 成功レスポンス

```json
{
  "id": "chatcmpl-abc123",
  "object": "chat.completion",
  "created": 1234567890,
  "model": "gpt-4o",
  "choices": [...],
  "usage": {
    "prompt_tokens": 10,
    "completion_tokens": 20,
    "total_tokens": 30
  }
}
```

### ルーティングの透明性

すべてのレスポンスには、チャネル情報を含む `_routing` フィールドが含まれます。

```json
{
  "id": "chatcmpl-abc123",
  ...,
  "_routing": {
    "channel": {
      "id": "ch_xxx",
      "name": "channel-name",
      "provider": "openai",
      "channelType": "PLATFORM"
    },
    "cached": false,
    "retryCount": 0
  }
}
```

| フィールド | 説明 |
|-------|-------------|
| `channel.id` | 使用されたチャネル識別子 |
| `channel.provider` | アップストリームプロバイダー (openai, anthropicなど) |
| `channel.channelType` | `PLATFORM` (LemonData) または `PRIVATE` (BYOK) |
| `cached` | レスポンスがキャッシュから提供されたかどうか |
| `retryCount` | リトライ試行回数（ある場合） |

### エラーレスポンス

```json
{
  "error": {
    "message": "Invalid API key provided",
    "type": "invalid_api_key",
    "code": "invalid_api_key"
  }
}
```

## レート制限

レート制限はロールベースであり、管理者によって設定可能です。デフォルト値は以下の通りです。

| ロール | リクエスト数/分 |
|------|-------------|
| User | 60 |
| Partner | 300 |
| VIP | 1,000 |
| Admin | 無制限 |

<Note>
カスタムレート制限についてはサポートにお問い合わせください。正確な値はアカウント設定によって異なる場合があります。
</Note>

レート制限ヘッダーはすべてのレスポンスに含まれます。

```
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 55
X-RateLimit-Reset: 1234567890
```

## OpenAPI仕様

<Card
  title="OpenAPI仕様"
  icon="file-code"
  href="/openapi.json"
>
  完全なOpenAPI 3.0仕様をダウンロード
</Card>
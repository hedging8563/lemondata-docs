---
title: "Slack"
description: "Socket Mode を使用して Claw インスタンスを Slack ワークスペースに接続します"
---

Socket Mode を使用して Slack ワークスペースに AI アシスタントを追加します。公開 URL は不要です。

## 前提条件

- 管理者権限を持つ [Slack](https://slack.com/) ワークスペース
- Claw インスタンス ([こちらで作成](https://lemondata.cc/dashboard/claw))

## セットアップガイド

<Steps>
  <Step title="Slack アプリの作成">
    1. [Slack API](https://api.slack.com/apps) に移動し、**Create New App** をクリックします
    2. **From scratch** を選択します
    3. アプリ名（例: "AI Assistant"）を入力し、ワークスペースを選択します
    4. **Create App** をクリックします
  </Step>
  <Step title="Socket Mode の有効化">
    1. 左側のサイドバーで **Socket Mode** に移動します
    2. **Enable Socket Mode** を ON に切り替えます
    3. トークンに名前（例: "claw-socket"）を付け、**Generate** をクリックします
    4. **App-Level Token**（`xapp-` で始まるもの）をコピーします。これが必要になります
  </Step>
  <Step title="ボットの権限設定">
    1. サイドバーの **OAuth & Permissions** に移動します
    2. **Bot Token Scopes** で、以下のスコープを追加します:
       - `chat:write` — メッセージの送信
       - `im:history` — DM 履歴の読み取り
       - `im:read` — DM の表示
       - `im:write` — DM の開始
       - `app_mentions:read` — @メンションの検出
    3. 上部の **Install to Workspace** をクリックします
    4. アプリを承認します
    5. **Bot User OAuth Token**（`xoxb-` で始まるもの）をコピーします
  </Step>
  <Step title="イベントの有効化">
    1. サイドバーの **Event Subscriptions** に移動します
    2. **Enable Events** を ON に切り替えます
    3. **Subscribe to bot events** で以下を追加します:
       - `message.im` — DM 内のメッセージ
       - `app_mention` — チャンネル内での @メンション
    4. **Save Changes** をクリックします
  </Step>
  <Step title="LemonData ダッシュボードでの設定">
    1. [Claw ダッシュボード](https://lemondata.cc/dashboard/claw) に移動します
    2. インスタンスの **設定アイコン** をクリックします
    3. **IM Integrations** タブを開きます
    4. **Slack** セクションを展開します
    5. **App Token**（`xapp-...`）と **Bot Token**（`xoxb-...`）を貼り付けます
    6. **Save** をクリックします
  </Step>
  <Step title="チャットを開始する">
    1. Slack で、ボットに DM を送信するか、チャンネルで @メンションします
    2. 最初のユーザーが自動的にオーナーとして **ペアリング** されます。コードは不要です！
    3. AI とのチャットを開始しましょう！
  </Step>
</Steps>

## アクセス制御

### グループ設定

ダッシュボードの **IM Integrations** タブでチャンネルアクセスを設定します:

| 設定 | オプション | 説明 |
|---------|---------|-------------|
| **Group Policy** | Open (デフォルト) / Allowlist / Disabled | ボットが応答するチャンネルを制御します |
| **Require @mention** | On / Off | @メンションされた場合のみボットが応答します |
| **Group IDs** | チャンネル ID のリスト | 特定のチャンネルに制限します（空の場合はすべてのチャンネル） |
| **Group Allowed Users** | ユーザー ID のリスト | これらのユーザーのみがボットを起動できます（許可リストモード） |

<Tip>
デフォルトでは、Slack は **open** グループポリシーを使用します。ボットは招待されたすべてのチャンネルで応答します。特定のチャンネルに制限するには **allowlist** を使用してください。
</Tip>

## トラブルシューティング

<AccordionGroup>
  <Accordion title="ボットが DM に応答しない">
    - 両方のトークンが正しいことを確認します（App Token は `xapp-` で始まり、Bot Token は `xoxb-` で始まります）
    - `message.im` イベントが購読されているか確認します
    - アプリがワークスペースにインストールされていることを確認します
  </Accordion>
  <Accordion title="ボットが @メンションに応答しない">
    - `app_mentions:read` スコープと `app_mention` イベントが設定されているか確認します
    - ボットを先にチャンネルに招待する必要があります（`/invite @botname` と入力）
  </Accordion>
  <Accordion title="'not_allowed_token_type' エラー">
    - Bot Token ではなく、**App-Level Token**（`xapp-`）を App Token フィールドに使用していることを確認してください
    - Bot Token（`xoxb-`）は Bot Token フィールドに入力します
  </Accordion>
</AccordionGroup>
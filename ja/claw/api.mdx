---
title: "APIリファレンス"
description: "/v1/claw APIを通じてプログラムでClawインスタンスを管理します"
---

すべてのClaw APIエンドポイントは、`Authorization: Bearer sk-...` ヘッダーによる認証が必要です。

**ベースURL:** `https://api.lemondata.cc/v1/claw`

## インスタンス一覧

```
GET /v1/claw/instances
```

認証された組織のすべてのインスタンスを返します。

<RequestExample>
```bash cURL
curl https://api.lemondata.cc/v1/claw/instances \
  -H "Authorization: Bearer sk-your-api-key"
```

```python Python
import requests

resp = requests.get(
    "https://api.lemondata.cc/v1/claw/instances",
    headers={"Authorization": "Bearer sk-your-api-key"}
)
print(resp.json())
```
</RequestExample>

<ResponseExample>
```json 200
{
  "instances": [
    {
      "id": "cm5abc123",
      "subdomain": "mybot",
      "url": "https://claw-mybot.lemondata.cc",
      "defaultModel": "claude-opus-4-6",
      "hasIMConfig": true,
      "status": "RUNNING",
      "paidUntil": "2026-03-10T00:00:00.000Z",
      "canRebuild": true,
      "totalPaid": 20,
      "createdAt": "2026-02-08T00:00:00.000Z"
    }
  ]
}
```
</ResponseExample>

### インスタンスステータスの値

| ステータス | 説明 |
|--------|-------------|
| `PENDING` | 作成直後、プロビジョニング待機中 |
| `PROVISIONING` | コンテナをデプロイ中 |
| `RUNNING` | インスタンスはアクティブで正常です |
| `STOPPED` | 有効期限切れにより停止（データは7日間保持されます） |
| `FAILED` | デプロイ失敗（自動返金済み） |
| `DELETED` | 完全に削除済み |

---

## インスタンスの作成

```
POST /v1/claw/instances
```

新しいインスタンスを作成し、組織の残高から30日分として **$20** を課金します。

<ParamField body="subdomain" type="string" required>
  サブドメイン（3〜32文字、小文字の英数字とハイフン）。インスタンスURL: `https://claw-{subdomain}.lemondata.cc`
</ParamField>

<ParamField body="defaultModel" type="string">
  デフォルトのAIモデル（例：`claude-opus-4-6`, `gpt-5.2`, `gemini-3-pro-preview`, `minimax-m2.5`, `kimi-k2.5`）
</ParamField>

<RequestExample>
```bash cURL
curl -X POST https://api.lemondata.cc/v1/claw/instances \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"subdomain": "mybot", "defaultModel": "claude-opus-4-6"}'
```

```python Python
import requests

resp = requests.post(
    "https://api.lemondata.cc/v1/claw/instances",
    headers={"Authorization": "Bearer sk-your-api-key"},
    json={"subdomain": "mybot", "defaultModel": "claude-opus-4-6"}
)
print(resp.json())
```
</RequestExample>

<ResponseExample>
```json 201
{
  "id": "cm5abc123",
  "subdomain": "mybot",
  "url": "https://claw-mybot.lemondata.cc",
  "status": "PENDING",
  "paidUntil": "2026-03-10T00:00:00.000Z",
  "charged": true,
  "chargedAmount": 20
}
```
</ResponseExample>

<Warning>
残高不足の場合は **402 Payment Required** を返します。インスタンスを作成する前に、組織に少なくとも$20の残高があることを確認してください。
</Warning>

---

## インスタンスの取得

```
GET /v1/claw/instances/:id
```

特定のインスタンスの詳細を返します。

---

## インスタンスの更新

```
PATCH /v1/claw/instances/:id
```

インスタンス設定を更新します。

<ParamField body="defaultModel" type="string | null">
  デフォルトのAIモデルを変更します
</ParamField>

<ParamField body="imConfig" type="object | null">
  IMプラットフォームの設定（Telegram、Discordなど）を更新します
</ParamField>

<RequestExample>
```bash cURL
curl -X PATCH https://api.lemondata.cc/v1/claw/instances/cm5abc123 \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"defaultModel": "claude-sonnet-4-5"}'
```
</RequestExample>

---

## インスタンスの再構築

```
POST /v1/claw/instances/:id/rebuild
```

データを保持したまま（PVC）、コンテナを破棄して再作成します。**1日あたり10回のリビルド**に制限されています。

1日の制限を超えた場合、**429 Too Many Requests** を返します。

---

## インスタンスの更新（延長）

```
POST /v1/claw/instances/:id/renew
```

請求期間を30日間（$20）延長します。有効期限切れで停止していたインスタンスは、自動的に再起動します。

<ResponseExample>
```json 200
{
  "id": "cm5abc123",
  "subdomain": "mybot",
  "status": "RUNNING",
  "paidUntil": "2026-04-09T00:00:00.000Z",
  "charged": true,
  "chargedAmount": 20
}
```
</ResponseExample>

---

## ヘルスチェック

```
GET /v1/claw/health
```

Clawサービスのヘルスステータスを返します。認証は不要です。

```json
{"status": "ok", "timestamp": "2026-02-08T15:00:00.000Z"}
```
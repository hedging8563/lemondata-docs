---
title: "DingTalk"
description: "Stream モードを使用して Claw インスタンスを DingTalk に接続します"
---

Stream モードを使用して DingTalk (钉钉) を Claw インスタンスに接続します。これは WebSocket ベースの接続であり、パブリック URL は不要です。

## 前提条件

- 管理者権限を持つ [DingTalk](https://www.dingtalk.com/) アカウント
- Claw インスタンス ([こちらで作成](https://lemondata.cc/dashboard/claw))

## セットアップガイド

<Steps>
  <Step title="DingTalk アプリの作成">
    1. [DingTalk オープンプラットフォーム](https://open-dev.dingtalk.com/)にアクセスします
    2. **Application Development** → **Enterprise Internal Development** をクリックします
    3. **Create Application** をクリックします
    4. アプリ名と説明を入力します
    5. **Confirm** をクリックします
  </Step>
  <Step title="ロボット機能の有効化">
    1. アプリ内で **App Features** → **Robot** に移動します
    2. ロボット設定を有効にします
    3. **Stream Mode** を選択します (推奨 — パブリック URL は不要です)
    4. **Publish** をクリックします

    <Tip>
    Stream モードは WebSocket を使用するため、Claw インスタンスに公開された Webhook URL は必要ありません。これが最も簡単なセットアップ方法です。
    </Tip>
  </Step>
  <Step title="認証情報の取得">
    1. **Basic Information** → **Credentials** に移動します
    2. **AppKey** と **AppSecret** をコピーします
  </Step>
  <Step title="アプリの公開">
    1. **Version Management** に移動します
    2. 新しいバージョンを作成します (少なくともテストバージョン)
    3. 公開範囲 (ボットを表示できるユーザー/部門) を設定します
    4. 送信して公開します
  </Step>
  <Step title="LemonData ダッシュボードでの設定">
    1. [Claw ダッシュボード](https://lemondata.cc/dashboard/claw)にアクセスします
    2. インスタンスの **設定アイコン** をクリックします
    3. **IM Integrations** タブを開きます
    4. **DingTalk** セクションを展開します
    5. **AppKey** と **AppSecret** を貼り付けます
    6. **Save** をクリックします
  </Step>
  <Step title="チャットの開始">
    1. DingTalk でボットを名前で検索します
    2. メッセージを送信します
    3. 最初のユーザーがオーナーとして**自動的にペアリング**されます。コードは不要です！
    4. AI とのチャットを開始しましょう！
  </Step>
</Steps>

## グループ設定

ダッシュボードの **IM Integrations** タブでグループチャットの動作を設定します：

| 設定 | オプション | 説明 |
|---------|---------|-------------|
| **Group Policy** | Open (デフォルト) / Allowlist / Disabled | グループ内でボットをトリガーできるユーザーを制御します |
| **Group Allowed Users** | ユーザー ID のリスト | これらのユーザーのみがボットをトリガーできます (allowlist モード) |

<Note>
DingTalk では、グループ内でボットをトリガーするために**常に @メンションが必要**です。これはプラットフォームの制限であり、設定で変更することはできません。DingTalk ではグループ ID によるフィルタリングは利用できません。アクセス制御には Group Policy 設定を使用してください。
</Note>

## トラブルシューティング

<AccordionGroup>
  <Accordion title="ボットが応答しない">
    - AppKey と AppSecret が正しいことを確認してください
    - アプリが公開されていることを確認してください (少なくともテストバージョン)
    - ロボット設定で Stream モードが選択されていることを確認してください
    - ボットがユーザーアカウントから見える状態であることを確認してください
  </Accordion>
  <Accordion title="接続が頻繁に切れる">
    - Stream モードは永続的な WebSocket 接続を維持します
    - 一時的な切断は正常です。ボットは自動的に再接続します
    - 問題が解決しない場合は、ダッシュボードからインスタンスを再起動してみてください
  </Accordion>
</AccordionGroup>
---
title: "Feishu / Lark"
description: "Verbinden Sie Ihre Claw-Instanz mit Feishu (Lark) über WebSocket-Events"
---

Verbinden Sie Feishu (飞书) oder Lark mit Ihrer Claw-Instanz. Verwendet den WebSocket-Modus — keine öffentliche Callback-URL erforderlich.

## Voraussetzungen

- Ein [Feishu](https://www.feishu.cn/)- oder [Lark](https://www.larksuite.com/)-Konto mit Entwicklerzugriff
- Eine Claw-Instanz ([hier erstellen](https://lemondata.cc/dashboard/claw))

## Einrichtungsanleitung

<Steps>
  <Step title="Feishu-App erstellen">
    1. Gehen Sie zur [Feishu Open Platform](https://open.feishu.cn/app) (oder [Lark Developer](https://open.larksuite.com/app))
    2. Klicken Sie auf **Create Custom App**
    3. Geben Sie einen App-Namen und eine Beschreibung ein
    4. Klicken Sie auf **Create**
  </Step>
  <Step title="Bot-Funktion hinzufügen">
    1. Gehen Sie in Ihren App-Einstellungen zu **Features** → **Bot**
    2. Aktivieren Sie die Bot-Funktion
    3. Dies ermöglicht es Ihrer App, Nachrichten zu empfangen und zu senden
  </Step>
  <Step title="Anmeldedaten abrufen">
    1. Gehen Sie zu **Credentials & Basic Info**
    2. Kopieren Sie die **App ID** (beginnt mit `cli_`)
    3. Kopieren Sie das **App Secret**
  </Step>
  <Step title="Event-Abonnement konfigurieren">
    1. Gehen Sie zu **Event Subscriptions**
    2. Wählen Sie den **WebSocket**-Modus (empfohlen — keine öffentliche URL erforderlich)
    3. Falls dazu aufgefordert, legen Sie den **Encrypt Key** und das **Verification Token** fest

    <Tip>
    Wenn Sie Feishu im LemonData-Dashboard konfigurieren, werden Encrypt Key und Verification Token automatisch für Sie generiert. Kopieren Sie diese Werte in die Feishu-Entwicklerkonsole.
    </Tip>
  </Step>
  <Step title="Event-Berechtigungen hinzufügen">
    1. Fügen Sie unter Event Subscriptions diese Events hinzu:
       - `im.message.receive_v1` — Nachrichten empfangen
    2. Gehen Sie zu **Permissions & Scopes** und fügen Sie hinzu:
       - `im:message` — Nachrichten senden und empfangen
       - `im:message.group_at_msg` — Gruppen-@Erwähnungen empfangen
    3. Klicken Sie auf **Save**
  </Step>
  <Step title="App veröffentlichen">
    1. Gehen Sie zu **App Release** → **Version Management**
    2. Erstellen Sie eine neue Version
    3. Zur Überprüfung einreichen (bei internen Apps geschieht dies normalerweise sofort)
    4. Sobald sie genehmigt wurde, ist die App live
  </Step>
  <Step title="Im LemonData-Dashboard konfigurieren">
    1. Gehen Sie zu Ihrem [Claw Dashboard](https://lemondata.cc/dashboard/claw)
    2. Klicken Sie auf das **Einstellungen-Icon** Ihrer Instanz
    3. Öffnen Sie den Tab **IM Integrations**
    4. Erweitern Sie den Bereich **Feishu**
    5. Fügen Sie Ihre **App ID** und Ihr **App Secret** ein
    6. Kopieren Sie den automatisch generierten **Encrypt Key** und das **Verification Token** zurück in die Feishu-Entwicklerkonsole
    7. Klicken Sie auf **Save**
  </Step>
  <Step title="Chatten starten">
    1. Suchen Sie in Feishu nach Ihrem Bot anhand seines Namens
    2. Senden Sie ihm eine Nachricht
    3. Der erste Benutzer wird **automatisch als Besitzer gekoppelt** — kein Code erforderlich!
    4. Beginnen Sie mit der KI zu chatten!
  </Step>
</Steps>

## Gruppeneinstellungen

Konfigurieren Sie das Verhalten von Gruppenchats im Tab **IM Integrations** Ihres Dashboards:

| Einstellung | Optionen | Beschreibung |
|---------|---------|-------------|
| **Group Policy** | Offen (Standard) / Allowlist / Deaktiviert | Steuert, wer den Bot in Gruppen auslösen kann |
| **Require @mention** | Ein / Aus | Bot antwortet nur, wenn er @erwähnt wird |
| **Group IDs** | Liste der Chat-IDs | Auf bestimmte Gruppen beschränken (leer = alle Gruppen) |
| **Group Allowed Users** | Liste der Open IDs | Nur diese Benutzer können den Bot auslösen (Allowlist-Modus) |

## Fehlerbehebung

<AccordionGroup>
  <Accordion title="Bot empfängt keine Nachrichten">
    - Überprüfen Sie, ob die App veröffentlicht und genehmigt wurde
    - Überprüfen Sie, ob das Event `im.message.receive_v1` abonniert ist
    - Stellen Sie sicher, dass der WebSocket-Modus ausgewählt ist (nicht HTTP)
    - Überprüfen Sie, ob Encrypt Key und Verification Token zwischen der Feishu-Konsole und der Claw-Konfiguration übereinstimmen
  </Accordion>
  <Accordion title="'app_ticket'-Fehler">
    - Dies bedeutet normalerweise, dass die App ID oder das App Secret falsch ist
    - Überprüfen Sie die Anmeldedaten in Ihrem Dashboard erneut
  </Accordion>
</AccordionGroup>
---
title: "Xếp hạng lại tài liệu"
openapi: "POST /v1/rerank"
description: "Xếp hạng lại các tài liệu theo mức độ liên quan với một truy vấn"
---

Xếp hạng lại các tài liệu bằng cách sử dụng các mô hình tương đồng ngữ nghĩa. Hữu ích cho việc cải thiện kết quả tìm kiếm và các ứng dụng RAG.

## Request Body

<ParamField body="model" type="string" required>
  ID của mô hình reranker cần sử dụng (ví dụ: `BAAI/bge-reranker-v2-m3`, `qwen3-rerank`).
</ParamField>

<ParamField body="query" type="string" required>
  Truy vấn để xếp hạng các tài liệu dựa trên đó.
</ParamField>

<ParamField body="documents" type="array" required>
  Danh sách các tài liệu (chuỗi) cần xếp hạng lại.
</ParamField>

<ParamField body="top_n" type="integer">
  Số lượng kết quả hàng đầu cần trả về. Mặc định là tất cả tài liệu.
</ParamField>

<ParamField body="return_documents" type="boolean" default="false">
  Có bao gồm văn bản tài liệu gốc trong phản hồi hay không.
</ParamField>

## Response

<ResponseField name="results" type="array">
  Danh sách các tài liệu đã được xếp hạng kèm theo điểm số.

  Mỗi kết quả bao gồm:
  - `index` (integer): Chỉ mục tài liệu gốc
  - `relevance_score` (number): Điểm số liên quan (0-1)
  - `document` (string): Văn bản gốc (nếu `return_documents=true`)
</ResponseField>

<ResponseField name="model" type="string">
  Mô hình được sử dụng để xếp hạng lại.
</ResponseField>

<ResponseField name="usage" type="object">
  Thống kê mức sử dụng token.
</ResponseField>

<RequestExample>
```bash cURL
curl -X POST "https://api.lemondata.cc/v1/rerank" \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "BAAI/bge-reranker-v2-m3",
    "query": "What is machine learning?",
    "documents": [
      "Machine learning is a subset of AI",
      "The weather is nice today",
      "Deep learning uses neural networks"
    ],
    "top_n": 2,
    "return_documents": true
  }'
```

```python Python
import requests

response = requests.post(
    "https://api.lemondata.cc/v1/rerank",
    headers={"Authorization": "Bearer sk-your-api-key"},
    json={
        "model": "BAAI/bge-reranker-v2-m3",
        "query": "What is machine learning?",
        "documents": [
            "Machine learning is a subset of AI",
            "The weather is nice today",
            "Deep learning uses neural networks"
        ],
        "top_n": 2
    }
)

print(response.json())
```

```javascript JavaScript
const response = await fetch('https://api.lemondata.cc/v1/rerank', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer sk-your-api-key',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    model: 'BAAI/bge-reranker-v2-m3',
    query: 'What is machine learning?',
    documents: [
      'Machine learning is a subset of AI',
      'The weather is nice today',
      'Deep learning uses neural networks'
    ],
    top_n: 2
  })
});

const data = await response.json();
console.log(data.results);
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "net/http"
)

func main() {
    payload := map[string]interface{}{
        "model": "BAAI/bge-reranker-v2-m3",
        "query": "What is machine learning?",
        "documents": []string{
            "Machine learning is a subset of AI",
            "The weather is nice today",
            "Deep learning uses neural networks",
        },
        "top_n": 2,
    }
    body, _ := json.Marshal(payload)

    req, _ := http.NewRequest("POST", "https://api.lemondata.cc/v1/rerank", bytes.NewBuffer(body))
    req.Header.Set("Authorization", "Bearer sk-your-api-key")
    req.Header.Set("Content-Type", "application/json")

    client := &http.Client{}
    resp, _ := client.Do(req)
    defer resp.Body.Close()

    var result map[string]interface{}
    json.NewDecoder(resp.Body).Decode(&result)
    fmt.Println(result["results"])
}
```

```php PHP
<?php
$ch = curl_init('https://api.lemondata.cc/v1/rerank');

curl_setopt_array($ch, [
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POST => true,
    CURLOPT_HTTPHEADER => [
        'Content-Type: application/json',
        'Authorization: Bearer sk-your-api-key'
    ],
    CURLOPT_POSTFIELDS => json_encode([
        'model' => 'BAAI/bge-reranker-v2-m3',
        'query' => 'What is machine learning?',
        'documents' => [
            'Machine learning is a subset of AI',
            'The weather is nice today',
            'Deep learning uses neural networks'
        ],
        'top_n' => 2
    ])
]);

$response = curl_exec($ch);
curl_close($ch);

$data = json_decode($response, true);
print_r($data['results']);
```
</RequestExample>

<ResponseExample>
```json Response
{
  "results": [
    {
      "index": 0,
      "relevance_score": 0.95,
      "document": "Machine learning is a subset of AI"
    },
    {
      "index": 2,
      "relevance_score": 0.82,
      "document": "Deep learning uses neural networks"
    }
  ],
  "model": "BAAI/bge-reranker-v2-m3",
  "usage": {
    "prompt_tokens": 45,
    "total_tokens": 45
  }
}
```
</ResponseExample>
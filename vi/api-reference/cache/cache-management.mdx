---
title: "Quản lý Cache"
description: "Kiểm soát hành vi lưu bộ nhớ đệm (caching) cho các yêu cầu API của bạn"
---

## Tổng quan

LemonData tự động quản lý việc lưu bộ nhớ đệm (caching) để tối ưu hóa hiệu suất và giảm chi phí. Mặc dù không có endpoint công khai để xóa các mục cache, bạn có toàn quyền kiểm soát hành vi caching thông qua các điều khiển ở cấp độ yêu cầu (request-level).

## Bỏ qua Cache

Để nhận các phản hồi mới mà không sử dụng cache, hãy sử dụng tham số `cache_control` trong yêu cầu của bạn:

<CodeGroup>

```bash cURL
curl -X POST "https://api.lemondata.cc/v1/chat/completions" \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4o",
    "messages": [{"role": "user", "content": "Hello!"}],
    "cache_control": {"type": "no_cache"}
  }'
```

```python Python
from openai import OpenAI

client = OpenAI(
    api_key="sk-your-api-key",
    base_url="https://api.lemondata.cc/v1"
)

response = client.chat.completions.create(
    model="gpt-4o",
    messages=[{"role": "user", "content": "Hello!"}],
    extra_body={"cache_control": {"type": "no_cache"}}
)

print(response.choices[0].message.content)
```

```javascript JavaScript
const response = await fetch(
  'https://api.lemondata.cc/v1/chat/completions',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer sk-your-api-key',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      model: 'gpt-4o',
      messages: [{ role: 'user', content: 'Hello!' }],
      cache_control: { type: 'no_cache' }
    })
  }
);

const data = await response.json();
console.log(data);
```

</CodeGroup>

## Các tùy chọn Cache Control

| Loại | Tác động |
|------|--------|
| `no_cache` | Bỏ qua việc tra cứu cache, luôn nhận phản hồi mới |
| `no_store` | Không lưu phản hồi này vào cache |
| `response_only` | Chỉ sử dụng cache khớp chính xác (bỏ qua semantic) |
| `semantic_only` | Chỉ sử dụng cache ngữ nghĩa (skip semantic) (bỏ qua khớp chính xác) |

## Phản hồi về Cache

Nếu bạn nhận được một phản hồi từ cache không chính xác, bạn có thể báo cáo nó:

```bash
curl -X POST "https://api.lemondata.cc/v1/cache/feedback" \
  -H "Authorization: Bearer sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "cache_entry_id": "abc123",
    "feedback_type": "wrong_answer",
    "description": "Response was outdated"
  }'
```

Khi một mục cache nhận đủ số lượng phản hồi tiêu cực, nó sẽ tự động bị vô hiệu hóa.

## Các trường hợp sử dụng

<AccordionGroup>
  <Accordion title="Kiểm tra các phản hồi mới">
    Trong quá trình phát triển, hãy sử dụng `cache_control: {"type": "no_cache"}` để đảm bảo bạn đang nhận được các phản hồi API mới nhất.
  </Accordion>

  <Accordion title="Các truy vấn nhạy cảm với thời gian">
    Đối với dữ liệu thời gian thực như giá cổ phiếu hoặc thời tiết, hãy luôn sử dụng `no_cache` để lấy thông tin hiện tại.
  </Accordion>

  <Accordion title="Gỡ lỗi (Debugging)">
    Khi gỡ lỗi các phản hồi không mong muốn, hãy sử dụng `no_cache` để loại trừ các kết quả được lưu trong cache.
  </Accordion>
</AccordionGroup>

<Note>
  Để biết thêm chi tiết về caching, hãy xem [Hướng dẫn Caching](/guides/caching).
</Note>
---
title: "Chỉnh sửa hình ảnh"
openapi: "POST /v1/images/edits"
description: "Chỉnh sửa hình ảnh dựa trên prompt và hình ảnh nguồn"
---

## Xác thực

<ParamField header="Authorization" type="string" required>
  Token Bearer để xác thực API. Định dạng: `Bearer sk-your-api-key`
</ParamField>

## Tổng quan

Tạo hình ảnh đã chỉnh sửa hoặc mở rộng từ hình ảnh gốc và prompt. Yêu cầu content type `multipart/form-data`.

## Nội dung yêu cầu

<ParamField body="image" type="file" required>
  Hình ảnh cần chỉnh sửa. Phải là file PNG hợp lệ, nhỏ hơn 4MB và có tỷ lệ vuông. Hình ảnh nên có vùng trong suốt ở nơi muốn chỉnh sửa.
</ParamField>

<ParamField body="prompt" type="string" required>
  Mô tả văn bản của chỉnh sửa mong muốn.
</ParamField>

<ParamField body="mask" type="file">
  Hình ảnh bổ sung với các vùng hoàn toàn trong suốt chỉ ra nơi hình ảnh cần được chỉnh sửa. Phải là file PNG hợp lệ, nhỏ hơn 4MB và có cùng kích thước với `image`.
</ParamField>

<ParamField body="model" type="string" default="dall-e-2">
  Mô hình sử dụng để chỉnh sửa hình ảnh. Hiện tại chỉ hỗ trợ `dall-e-2`.
</ParamField>

<ParamField body="n" type="integer" default="1">
  Số lượng hình ảnh cần tạo. Phải từ 1 đến 10.
</ParamField>

<ParamField body="size" type="string">
  Kích thước của hình ảnh được tạo. Phải là một trong `256x256`, `512x512`, hoặc `1024x1024`.
</ParamField>

<ParamField body="response_format" type="string" default="url">
  Định dạng trả về của hình ảnh được tạo. Phải là `url` hoặc `b64_json`.
</ParamField>

<ParamField body="user" type="string">
  Mã định danh duy nhất đại diện cho người dùng cuối để giám sát lạm dụng.
</ParamField>

## Phản hồi

<ResponseField name="created" type="integer">
  Dấu thời gian Unix khi hình ảnh được tạo.
</ResponseField>

<ResponseField name="data" type="array">
  Mảng các hình ảnh đã tạo.

  Mỗi đối tượng chứa:
  - `url` (string): URL của hình ảnh đã chỉnh sửa (nếu response_format là `url`)
  - `b64_json` (string): Hình ảnh mã hóa Base64 (nếu response_format là `b64_json`)
</ResponseField>

<RequestExample>
```bash cURL
curl -X POST "https://api.lemondata.cc/v1/images/edits" \
  -H "Authorization: Bearer sk-your-api-key" \
  -F "image=@sunlit_lounge.png" \
  -F "mask=@mask.png" \
  -F "prompt=A sunlit indoor lounge area with a pool" \
  -F "n=1" \
  -F "size=1024x1024"
```

```python Python
from openai import OpenAI

client = OpenAI(
    api_key="sk-your-api-key",
    base_url="https://api.lemondata.cc/v1"
)

response = client.images.edit(
    model="dall-e-2",
    image=open("sunlit_lounge.png", "rb"),
    mask=open("mask.png", "rb"),
    prompt="A sunlit indoor lounge area with a pool",
    n=1,
    size="1024x1024"
)

print(response.data[0].url)
```

```javascript JavaScript
import OpenAI from 'openai';
import fs from 'fs';

const client = new OpenAI({
  apiKey: 'sk-your-api-key',
  baseURL: 'https://api.lemondata.cc/v1'
});

const response = await client.images.edit({
  model: 'dall-e-2',
  image: fs.createReadStream('sunlit_lounge.png'),
  mask: fs.createReadStream('mask.png'),
  prompt: 'A sunlit indoor lounge area with a pool',
  n: 1,
  size: '1024x1024'
});

console.log(response.data[0].url);
```

```go Go
package main

import (
    "bytes"
    "fmt"
    "io"
    "mime/multipart"
    "net/http"
    "os"
)

func main() {
    body := &bytes.Buffer{}
    writer := multipart.NewWriter(body)

    image, _ := os.Open("sunlit_lounge.png")
    defer image.Close()
    part, _ := writer.CreateFormFile("image", "sunlit_lounge.png")
    io.Copy(part, image)

    mask, _ := os.Open("mask.png")
    defer mask.Close()
    maskPart, _ := writer.CreateFormFile("mask", "mask.png")
    io.Copy(maskPart, mask)

    writer.WriteField("prompt", "A sunlit indoor lounge area with a pool")
    writer.WriteField("n", "1")
    writer.WriteField("size", "1024x1024")
    writer.Close()

    req, _ := http.NewRequest("POST", "https://api.lemondata.cc/v1/images/edits", body)
    req.Header.Set("Authorization", "Bearer sk-your-api-key")
    req.Header.Set("Content-Type", writer.FormDataContentType())

    client := &http.Client{}
    resp, _ := client.Do(req)
    defer resp.Body.Close()

    result, _ := io.ReadAll(resp.Body)
    fmt.Println(string(result))
}
```

```php PHP
<?php
$ch = curl_init('https://api.lemondata.cc/v1/images/edits');

$image = new CURLFile('sunlit_lounge.png', 'image/png', 'sunlit_lounge.png');
$mask = new CURLFile('mask.png', 'image/png', 'mask.png');

curl_setopt_array($ch, [
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POST => true,
    CURLOPT_HTTPHEADER => [
        'Authorization: Bearer sk-your-api-key'
    ],
    CURLOPT_POSTFIELDS => [
        'image' => $image,
        'mask' => $mask,
        'prompt' => 'A sunlit indoor lounge area with a pool',
        'n' => 1,
        'size' => '1024x1024'
    ]
]);

$response = curl_exec($ch);
curl_close($ch);

$data = json_decode($response, true);
echo $data['data'][0]['url'];
```
</RequestExample>

<ResponseExample>
```json Phản hồi
{
  "created": 1706000000,
  "data": [
    {
      "url": "https://..."
    }
  ]
}
```
</ResponseExample>

## Ghi chú

<Note>
  Chỉnh sửa hình ảnh chỉ khả dụng với DALL-E 2. Hình ảnh phải có các vùng trong suốt chỉ ra nơi cần áp dụng chỉnh sửa, hoặc bạn có thể cung cấp một hình ảnh mask riêng biệt.
</Note>

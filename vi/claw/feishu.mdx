<think>**Analyzing Documentation Needs**
**Mapping Translation Strategy**
**Evaluating Content Accuracy**
**Refining Component Handling**
**Evaluating Initial Translations**
**Evaluating First Draft Translation**
**Refining the Translation Process**
**Finalizing the Document**
**Reviewing the Initial Translation**
**Reviewing Translation Guidelines**
**Reviewing the Finished Translation**
**Reviewing Final Adjustments**
</think>

---
title: "Feishu / Lark"
description: "Kết nối instance Claw của bạn với Feishu (Lark) bằng các sự kiện WebSocket"
---

Kết nối Feishu<think>**Revising UI Element Handling**
</think>

 (飞书) hoặc Lark với instance Claw của bạn. Sử dụng chế độ WebSocket — không cần URL callback công khai.

## Điều kiện tiên quyết

- Một tài khoản [Feishu](https://www.feishu.cn/) hoặc [Lark](https://www.larksuite.com/) có quyền truy cập dành cho nhà phát triển
- Một instance Claw ([tạo một cái tại đây](https://lemondata.cc/dashboard/claw))

## Hướng dẫn thiết lập

<Steps>
  <Step title="Tạo một ứng dụng Feishu">
    1. Truy cập [Feishu Open Platform](https://open.feishu.cn/app) (hoặc [Lark Developer](https://open.larksuite.com/app))
    2. Nhấp vào **Create Custom App**
    3. Nhập tên và mô tả ứng dụng
    4. Nhấp vào **Create**
  </Step>
  <Step title="Thêm khả năng Bot">
    1. Trong cài đặt ứng dụng, đi tới **Features** → **Bot**
    2. Kích hoạt khả năng bot
    3. Điều này cho phép ứng dụng của bạn nhận và gửi tin nhắn
  </Step>
  <Step title="Lấy thông tin xác thực">
    1. Đi tới **Credentials & Basic Info**
    2. Sao chép **App ID** (bắt đầu bằng `cli_`)
    3. Sao chép **App Secret**
  </Step>
  <Step title="Cấu hình Đăng ký Sự kiện">
    1. Đi tới **Event Subscriptions**
    2. Chọn chế độ **WebSocket** (được khuyến nghị — không cần URL công khai)
    3. Nếu được nhắc, hãy thiết lập **Encrypt Key** và **Verification Token**

    <Tip>
    Khi bạn cấu hình Feishu trong LemonData dashboard, Encrypt Key và Verification Token sẽ được **tạo tự động** cho bạn. Hãy sao chép các giá trị này vào Feishu developer console.
    </Tip>
  </Step>
  <Step title="Thêm Quyền Sự kiện">
    1. Trong mục Event Subscriptions, thêm các sự kiện sau:
       - `im.message.receive_v1` — Nhận tin nhắn
    2. Đi tới **Permissions & Scopes** và thêm:
       - `im:message` — Gửi và nhận tin nhắn
       - `im:message.group_at_msg` — Nhận các lượt @nhắc_tên trong nhóm
    3. Nhấp vào **Save**
  </Step>
  <Step title="Phát hành Ứng dụng">
    1. Đi tới **App Release** → **Version Management**
    2. Tạo một phiên bản mới
    3. Gửi để phê duyệt (đối với các ứng dụng nội bộ, việc này thường diễn ra tức thì)
    4. Sau khi được phê duyệt, ứng dụng sẽ hoạt động
  </Step>
  <Step title="Cấu hình trong LemonData Dashboard">
    1. Đi tới [Claw Dashboard](https://lemondata.cc/dashboard/claw) của bạn
    2. Nhấp vào **biểu tượng cài đặt** trên instance của bạn
    3. Mở tab **IM Integrations**
    4. Mở rộng phần **Feishu**
    5. Dán **App ID** và **App Secret** của bạn
    6. Sao chép **Encrypt Key** và **Verification Token** được tạo tự động quay lại Feishu developer console
    7. Nhấp vào **Save**
  </Step>
  <Step title="Bắt đầu trò chuyện">
    1. Trong Feishu, tìm kiếm bot của bạn theo tên
    2. Gửi cho nó một tin nhắn
    3. Người dùng đầu tiên sẽ được **tự động ghép đôi** làm chủ sở hữu — không cần code!
    4. Bắt đầu trò chuyện với AI!
  </Step>
</Steps>

## Cài đặt Nhóm

Cấu hình hành vi trò chuyện nhóm trong tab **IM Integrations** trên Dashboard của bạn:

| Cài đặt | Tùy chọn | Mô tả |
|---------|---------|-------------|
| **Chính sách Nhóm** | Mở (mặc định) / Allowlist / Đã tắt | Kiểm soát ai có thể kích hoạt bot trong các nhóm |
| **Yêu cầu @nhắc_tên** | Bật / Tắt | Bot chỉ phản hồi khi được @nhắc_tên |
| **ID Nhóm** | Danh sách chat ID | Giới hạn trong các nhóm cụ thể (để trống = tất cả các nhóm) |
| **Người dùng Nhóm được phép** | Danh sách Open ID | Chỉ những người dùng này mới có thể kích hoạt bot (chế độ allowlist) |

## Xử lý sự cố

<AccordionGroup>
  <Accordion title="Bot không nhận được tin nhắn">
    - Xác minh rằng ứng dụng đã được phát hành và phê duyệt
    - Kiểm tra xem sự kiện `im.message.receive_v1` đã được đăng ký chưa
    - Đảm bảo đã chọn chế độ WebSocket (không phải HTTP)
    - Xác minh Encrypt Key và Verification Token khớp nhau giữa Feishu console và cấu hình Claw
  </Accordion>
  <Accordion title="Lỗi 'app_ticket'">
    - Điều này thường có nghĩa là App ID hoặc App Secret không chính xác
    - Kiểm tra kỹ lại thông tin xác thực trong dashboard của bạn
  </Accordion>
</AccordionGroup>
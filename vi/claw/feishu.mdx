---
title: "Feishu / Lark"
description: "Kết nối instance Claw của bạn với Feishu (Lark) bằng các sự kiện WebSocket"
---

Kết nối Feishu (飞书) hoặc Lark với instance Claw của bạn. Sử dụng chế độ WebSocket — không cần URL callback công khai.

## Điều kiện tiên quyết

- Một tài khoản [Feishu](https://www.feishu.cn/) hoặc [Lark](https://www.larksuite.com/) có quyền truy cập nhà phát triển
- Một instance Claw ([tạo tại đây](https://lemondata.cc/dashboard/claw))

## Hướng dẫn thiết lập

<Steps>
  <Step title="Tạo một Ứng dụng Feishu">
    1. Truy cập [Feishu Open Platform](https://open.feishu.cn/app) (hoặc [Lark Developer](https://open.larksuite.com/app))
    2. Nhấp vào **Create Custom App**
    3. Nhập tên và mô tả ứng dụng
    4. Nhấp vào **Create**
  </Step>
  <Step title="Thêm Khả năng Bot">
    1. Trong cài đặt ứng dụng, đi tới **Features** → **Bot**
    2. Bật khả năng bot
    3. Điều này cho phép ứng dụng của bạn nhận và gửi tin nhắn
  </Step>
  <Step title="Lấy Thông tin xác thực">
    1. Đi tới **Credentials & Basic Info**
    2. Sao chép **App ID** (bắt đầu bằng `cli_`)
    3. Sao chép **App Secret**
  </Step>
  <Step title="Cấu hình Đăng ký Sự kiện">
    1. Đi tới **Event Subscriptions**
    2. Chọn chế độ **WebSocket** (khuyên dùng — không cần URL công khai)
    3. Nếu được yêu cầu, hãy thiết lập **Encrypt Key** và **Verification Token**

    <Tip>
    Khi bạn cấu hình Feishu trong dashboard LemonData, Encrypt Key và Verification Token sẽ được **tự động tạo** cho bạn. Sao chép các giá trị này vào bảng điều khiển nhà phát triển Feishu.
    </Tip>
  </Step>
  <Step title="Thêm Quyền Sự kiện">
    1. Trong mục Event Subscriptions, thêm các sự kiện sau:
       - `im.message.receive_v1` — Nhận tin nhắn
    2. Đi tới **Permissions & Scopes** và thêm:
       - `im:message` — Gửi và nhận tin nhắn
       - `im:message.group_at_msg` — Nhận các lượt nhắc tên (@mention) trong nhóm
    3. Nhấp vào **Save**
  </Step>
  <Step title="Xuất bản Ứng dụng">
    1. Đi tới **App Release** → **Version Management**
    2. Tạo một phiên bản mới
    3. Gửi để xem xét (đối với các ứng dụng nội bộ, việc này thường diễn ra tức thì)
    4. Sau khi được phê duyệt, ứng dụng sẽ hoạt động
  </Step>
  <Step title="Cấu hình trong Dashboard LemonData">
    1. Truy cập [Claw Dashboard](https://lemondata.cc/dashboard/claw) của bạn
    2. Nhấp vào **biểu tượng cài đặt** trên instance của bạn
    3. Mở tab **IM Integrations**
    4. Mở rộng phần **Feishu**
    5. Dán **App ID** và **App Secret** của bạn
    6. Sao chép **Encrypt Key** và **Verification Token** được tạo tự động quay lại bảng điều khiển nhà phát triển Feishu
    7. Nhấp vào **Save**
  </Step>
  <Step title="Bắt đầu Trò chuyện">
    1. Trong Feishu, tìm kiếm bot của bạn theo tên
    2. Gửi cho nó một tin nhắn
    3. Hoàn tất quá trình ghép nối
    4. Bắt đầu trò chuyện với AI!
  </Step>
</Steps>

## Xử lý sự cố

<AccordionGroup>
  <Accordion title="Bot không nhận được tin nhắn">
    - Xác minh ứng dụng đã được xuất bản và phê duyệt
    - Kiểm tra xem sự kiện `im.message.receive_v1` đã được đăng ký chưa
    - Đảm bảo chế độ WebSocket đã được chọn (không phải HTTP)
    - Xác minh Encrypt Key và Verification Token khớp nhau giữa bảng điều khiển Feishu và cấu hình Claw
  </Accordion>
  <Accordion title="Lỗi 'app_ticket'">
    - Điều này thường có nghĩa là App ID hoặc App Secret không chính xác
    - Kiểm tra lại thông tin xác thực trong dashboard của bạn
  </Accordion>
</AccordionGroup>
---
title: "Xác thực"
description: "Sử dụng API key để bảo vệ các yêu cầu API của bạn"
---

## API key

Tất cả các yêu cầu API đều yêu cầu xác thực bằng API key. Vui lòng bao gồm key của bạn trong header `Authorization`:

```bash
Authorization: Bearer sk-your-api-key
```

## Lấy API key của bạn

1. Đăng nhập vào [LemonData Dashboard](https://lemondata.cc/dashboard)
2. Điều hướng đến phần **API Keys**
3. Nhấp vào **Create New Key**
4. Cung cấp một tên mô tả cho key của bạn
5. Sao chép key ngay lập tức — nó sẽ chỉ hiển thị một lần

<Warning>
  **Thực hành bảo mật tốt nhất:**
  - Không bao giờ tiết lộ API key trong mã nguồn phía client
  - Không commit key vào hệ thống quản lý phiên bản (version control)
  - Sử dụng biến môi trường để lưu trữ key
  - Thay đổi (rotate) key định kỳ
  - Xóa các key không sử dụng
</Warning>

## Sử dụng API key

<CodeGroup>

```bash cURL
curl https://api.lemondata.cc/v1/chat/completions \
  -H "Authorization: Bearer $LEMONDATA_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"model": "gpt-4o", "messages": [{"role": "user", "content": "Hello!"}]}'
```

```python Python
import os
from openai import OpenAI

client = OpenAI(
    api_key=os.environ.get("LEMONDATA_API_KEY"),
    base_url="https://api.lemondata.cc/v1"
)
```

```javascript JavaScript
import OpenAI from 'openai';

const client = new OpenAI({
  apiKey: process.env.LEMONDATA_API_KEY,
  baseURL: 'https://api.lemondata.cc/v1'
});
```

```go Go
package main

import "github.com/sashabaranov/go-openai"

func main() {
    config := openai.DefaultConfig(os.Getenv("LEMONDATA_API_KEY"))
    config.BaseURL = "https://api.lemondata.cc/v1"
    client := openai.NewClientWithConfig(config)
}
```

```php PHP
<?php
$apiKey = getenv('LEMONDATA_API_KEY');

$ch = curl_init('https://api.lemondata.cc/v1/chat/completions');
curl_setopt_array($ch, [
    CURLOPT_HTTPHEADER => [
        'Authorization: Bearer ' . $apiKey,
        'Content-Type: application/json'
    ]
]);
```

</CodeGroup>

## Tính năng của API key

### Giới hạn sử dụng

Bạn có thể thiết lập giới hạn sử dụng cho mỗi API key để kiểm soát chi tiêu:

| Cài đặt | Mô tả |
|---------|-------------|
| **Không giới hạn** | Key sẽ sử dụng số dư tài khoản của bạn không giới hạn |
| **Giới hạn cố định** | Key sẽ ngừng hoạt động sau khi đạt đến số tiền chỉ định |

### Tiền tố của key

Tất cả các API key của LemonData đều bắt đầu bằng tiền tố `sk-`. Định dạng key là:

```
sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

## Khả năng tương thích với Anthropic API

Đối với endpoint `/v1/messages`, bạn có thể sử dụng header `x-api-key` (tương thích với Anthropic SDK):

```bash
curl https://api.lemondata.cc/v1/messages \
  -H "x-api-key: sk-your-api-key" \
  -H "anthropic-version: 2023-06-01" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "claude-sonnet-4-5",
    "max_tokens": 1024,
    "messages": [{"role": "user", "content": "Hello!"}]
  }'
```

<Note>
  Header `x-api-key` chỉ hỗ trợ các endpoint `/v1/messages` và `/v1/messages/count_tokens`. Các endpoint khác yêu cầu header `Authorization: Bearer`.
</Note>

## Phản hồi lỗi

| Mã trạng thái | Loại | Mã | Mô tả |
|-------------|------|------|-------------|
| 401 | `invalid_request_error` | `invalid_api_key` | API key bị thiếu hoặc không hợp lệ |
| 401 | `invalid_request_error` | `expired_api_key` | API key đã bị thu hồi |
| 402 | `insufficient_quota` | `insufficient_quota` | Số dư tài khoản không đủ |
| 402 | `insufficient_quota` | `quota_exceeded` | Đã đạt đến giới hạn sử dụng của API key |

Ví dụ về phản hồi lỗi:

```json
{
  "error": {
    "message": "Invalid API key provided",
    "type": "invalid_api_key",
    "code": "invalid_api_key"
  }
}
```
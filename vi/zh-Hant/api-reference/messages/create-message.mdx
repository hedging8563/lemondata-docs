---
title: "Tạo tin nhắn"
openapi: "POST /v1/messages"
description: "Tạo tin nhắn bằng định dạng Anthropic Messages API"
---

## Tổng quan

Endpoint này cung cấp khả năng tương thích gốc với Anthropic Messages API. Phù hợp cho các mô hình Claude có các tính năng như suy nghĩ mở rộng (extended thinking).

<Note>
Base URL của Anthropic SDK: `https://api.lemondata.cc` (không có hậu tố `/v1`)
</Note>

## Tiêu đề yêu cầu

<ParamField header="x-api-key" type="string" required>
  API key LemonData của bạn. Một giải pháp thay thế cho Bearer token.
</ParamField>

<ParamField header="anthropic-version" type="string" required>
  Phiên bản Anthropic API. Vui lòng sử dụng `2023-06-01`.
</ParamField>

## Thân yêu cầu

<ParamField body="model" type="string" required>
  ID mô hình Claude (ví dụ: `claude-sonnet-4-5`).
</ParamField>

<ParamField body="messages" type="array" required>
  Một mảng các đối tượng tin nhắn chứa `role` và `content`.
</ParamField>

<ParamField body="max_tokens" type="integer" required>
  Số lượng token tối đa được tạo ra.
</ParamField>

<ParamField body="system" type="string">
  Prompt hệ thống (tách biệt với mảng messages).
</ParamField>

<ParamField body="temperature" type="number" default="1">
  Nhiệt độ lấy mẫu (0-1).
</ParamField>

<ParamField body="stream" type="boolean" default="false">
  Bật phản hồi dạng stream.
</ParamField>

<ParamField body="thinking" type="object">
  Cấu hình suy nghĩ mở rộng (Claude Opus 4.5).

  - `type` (string): Đặt thành `"enabled"` để kích hoạt
  - `budget_tokens` (integer): Ngân sách token cho việc suy nghĩ
</ParamField>

<ParamField body="tools" type="array">
  Các công cụ có sẵn cho mô hình.
</ParamField>

<ParamField body="tool_choice" type="object">
  Cách mô hình nên sử dụng công cụ. Các tùy chọn: `auto`, `any`, `tool` (công cụ cụ thể).
</ParamField>

<ParamField body="top_p" type="number">
  Tham số lấy mẫu hạt nhân (Nucleus sampling). Vui lòng sử dụng temperature hoặc top_p, không sử dụng cả hai cùng lúc.
</ParamField>

<ParamField body="top_k" type="integer">
  Chỉ lấy mẫu từ K lựa chọn hàng đầu cho mỗi token.
</ParamField>

<ParamField body="stop_sequences" type="array">
  Các chuỗi dừng tùy chỉnh, sẽ khiến mô hình ngừng tạo.
</ParamField>

<ParamField body="metadata" type="object">
  Siêu dữ liệu (metadata) đính kèm vào yêu cầu.
</ParamField>